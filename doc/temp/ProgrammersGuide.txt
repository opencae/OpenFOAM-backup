Open∇FOAM
The Open Source CFD Toolbox
Programmer’s Guide
Version 2.1.0
15th December 2011
P-2
Copyright © 2011 OpenFOAM Foundation.
Permission is granted to copy, distribute and/or modify this document under the terms
of the GNU Free Documentation License, Version 1.2 published by the Free Software
Foundation; with no Invariant Sections, no Back-Cover Texts and one Front-Cover Text:
“Available free from openfoam.org.” A copy of the license is included in the section
entitled “GNU Free Documentation License”.
This document is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.
Typeset in LATEX.
Open∇FOAM-2.1.0
P-3
GNU Free Documentation License
Version 1.2, November 2002
Copyright ©2000,2001,2002 Free Software Foundation, Inc.
59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
Everyone is permitted to copy and distribute verbatim copies of this license document, but
changing it is not allowed.
Preamble
The purpose of this License is to make a manual, textbook, or other functional and useful
document “free” in the sense of freedom: to assure everyone the eﬀective freedom to copy and
redistribute it, with or without modifying it, either commercially or noncommercially. Secon-
darily, this License preserves for the author and publisher a way to get credit for their work,
while not being considered responsible for modiﬁcations made by others.
This License is a kind of “copyleft”, which means that derivative works of the document
must themselves be free in the same sense. It complements the GNU General Public License,
which is a copyleft license designed for free software.
We have designed this License in order to use it for manuals for free software, because free
software needs free documentation: a free program should come with manuals providing the
same freedoms that the software does. But this License is not limited to software manuals; it
can be used for any textual work, regardless of subject matter or whether it is published as a
printed book. We recommend this License principally for works whose purpose is instruction or
reference.
1. APPLICABILITY AND DEFINITIONS
This License applies to any manual or other work, in any medium, that contains a notice placed
by the copyright holder saying it can be distributed under the terms of this License. Such a
notice grants a world-wide, royalty-free license, unlimited in duration, to use that work under
the conditions stated herein. The “Document”, below, refers to any such manual or work.
Any member of the public is a licensee, and is addressed as “you”. You accept the license if
you copy, modify or distribute the work in a way requiring permission under copyright law.
A “Modiﬁed Version” of the Document means any work containing the Document or
a portion of it, either copied verbatim, or with modiﬁcations and/or translated into another
language.
A “Secondary Section” is a named appendix or a front-matter section of the Document
that deals exclusively with the relationship of the publishers or authors of the Document to
the Document’s overall subject (or to related matters) and contains nothing that could fall
directly within that overall subject. (Thus, if the Document is in part a textbook of mathe-
matics, a Secondary Section may not explain any mathematics.) The relationship could be a
matter of historical connection with the subject or with related matters, or of legal, commercial,
philosophical, ethical or political position regarding them.
The “Invariant Sections” are certain Secondary Sections whose titles are designated, as
being those of Invariant Sections, in the notice that says that the Document is released under
this License. If a section does not ﬁt the above deﬁnition of Secondary then it is not allowed to be
designated as Invariant. The Document may contain zero Invariant Sections. If the Document
does not identify any Invariant Sections then there are none.
The “Cover Texts” are certain short passages of text that are listed, as Front-Cover Texts
or Back-Cover Texts, in the notice that says that the Document is released under this License.
A Front-Cover Text may be at most 5 words, and a Back-Cover Text may be at most 25 words.
A “Transparent” copy of the Document means a machine-readable copy, represented in
a format whose speciﬁcation is available to the general public, that is suitable for revising the
Open∇FOAM-2.1.0
P-4
document straightforwardly with generic text editors or (for images composed of pixels) generic
paint programs or (for drawings) some widely available drawing editor, and that is suitable for
input to text formatters or for automatic translation to a variety of formats suitable for input to
text formatters. A copy made in an otherwise Transparent ﬁle format whose markup, or absence
of markup, has been arranged to thwart or discourage subsequent modiﬁcation by readers is not
Transparent. An image format is not Transparent if used for any substantial amount of text. A
copy that is not “Transparent” is called “Opaque”.
Examples of suitable formats for Transparent copies include plain ASCII without markup,
Texinfo input format, LaTeX input format, SGML or XML using a publicly available DTD,
and standard-conforming simple HTML, PostScript or PDF designed for human modiﬁcation.
Examples of transparent image formats include PNG, XCF and JPG. Opaque formats include
proprietary formats that can be read and edited only by proprietary word processors, SGML or
XML for which the DTD and/or processing tools are not generally available, and the machine-
generated HTML, PostScript or PDF produced by some word processors for output purposes
only.
The “Title Page” means, for a printed book, the title page itself, plus such following pages
as are needed to hold, legibly, the material this License requires to appear in the title page. For
works in formats which do not have any title page as such, “Title Page” means the text near
the most prominent appearance of the work’s title, preceding the beginning of the body of the
text.
A section “Entitled XYZ” means a named subunit of the Document whose title either is
precisely XYZ or contains XYZ in parentheses following text that translates XYZ in another
language. (Here XYZ stands for a speciﬁc section name mentioned below, such as “Acknowl-
edgements”, “Dedications”, “Endorsements”, or “History”.) To “Preserve the Ti-
tle” of such a section when you modify the Document means that it remains a section “Entitled
XYZ” according to this deﬁnition.
The Document may include Warranty Disclaimers next to the notice which states that this
License applies to the Document. These Warranty Disclaimers are considered to be included by
reference in this License, but only as regards disclaiming warranties: any other implication that
these Warranty Disclaimers may have is void and has no eﬀect on the meaning of this License.
2. VERBATIM COPYING
You may copy and distribute the Document in any medium, either commercially or noncom-
mercially, provided that this License, the copyright notices, and the license notice saying this
License applies to the Document are reproduced in all copies, and that you add no other con-
ditions whatsoever to those of this License. You may not use technical measures to obstruct or
control the reading or further copying of the copies you make or distribute. However, you may
accept compensation in exchange for copies. If you distribute a large enough number of copies
you must also follow the conditions in section 3.
You may also lend copies, under the same conditions stated above, and you may publicly
display copies.
3. COPYING IN QUANTITY
If you publish printed copies (or copies in media that commonly have printed covers) of the
Document, numbering more than 100, and the Document’s license notice requires Cover Texts,
you must enclose the copies in covers that carry, clearly and legibly, all these Cover Texts:
Front-Cover Texts on the front cover, and Back-Cover Texts on the back cover. Both covers
must also clearly and legibly identify you as the publisher of these copies. The front cover must
present the full title with all words of the title equally prominent and visible. You may add
other material on the covers in addition. Copying with changes limited to the covers, as long as
they preserve the title of the Document and satisfy these conditions, can be treated as verbatim
copying in other respects.
Open∇FOAM-2.1.0
P-5
If the required texts for either cover are too voluminous to ﬁt legibly, you should put the ﬁrst
ones listed (as many as ﬁt reasonably) on the actual cover, and continue the rest onto adjacent
pages.
If you publish or distribute Opaque copies of the Document numbering more than 100, you
must either include a machine-readable Transparent copy along with each Opaque copy, or state
in or with each Opaque copy a computer-network location from which the general network-using
public has access to download using public-standard network protocols a complete Transparent
copy of the Document, free of added material. If you use the latter option, you must take
reasonably prudent steps, when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated location until at least one
year after the last time you distribute an Opaque copy (directly or through your agents or
retailers) of that edition to the public.
It is requested, but not required, that you contact the authors of the Document well before
redistributing any large number of copies, to give them a chance to provide you with an updated
version of the Document.
4. MODIFICATIONS
You may copy and distribute a Modiﬁed Version of the Document under the conditions of
sections 2 and 3 above, provided that you release the Modiﬁed Version under precisely this
License, with the Modiﬁed Version ﬁlling the role of the Document, thus licensing distribution
and modiﬁcation of the Modiﬁed Version to whoever possesses a copy of it. In addition, you
must do these things in the Modiﬁed Version:
A. Use in the Title Page (and on the covers, if any) a title distinct from that of the Document,
and from those of previous versions (which should, if there were any, be listed in the
History section of the Document). You may use the same title as a previous version if the
original publisher of that version gives permission.
B. List on the Title Page, as authors, one or more persons or entities responsible for au-
thorship of the modiﬁcations in the Modiﬁed Version, together with at least ﬁve of the
principal authors of the Document (all of its principal authors, if it has fewer than ﬁve),
unless they release you from this requirement.
C. State on the Title page the name of the publisher of the Modiﬁed Version, as the publisher.
D. Preserve all the copyright notices of the Document.
E. Add an appropriate copyright notice for your modiﬁcations adjacent to the other copyright
notices.
F. Include, immediately after the copyright notices, a license notice giving the public per-
mission to use the Modiﬁed Version under the terms of this License, in the form shown
in the Addendum below.
G. Preserve in that license notice the full lists of Invariant Sections and required Cover Texts
given in the Document’s license notice.
H. Include an unaltered copy of this License.
I. Preserve the section Entitled “History”, Preserve its Title, and add to it an item stating
at least the title, year, new authors, and publisher of the Modiﬁed Version as given on the
Title Page. If there is no section Entitled “History” in the Document, create one stating
the title, year, authors, and publisher of the Document as given on its Title Page, then
add an item describing the Modiﬁed Version as stated in the previous sentence.
Open∇FOAM-2.1.0
P-6
J. Preserve the network location, if any, given in the Document for public access to a Trans-
parent copy of the Document, and likewise the network locations given in the Document
for previous versions it was based on. These may be placed in the “History” section. You
may omit a network location for a work that was published at least four years before the
Document itself, or if the original publisher of the version it refers to gives permission.
K. For any section Entitled “Acknowledgements” or “Dedications”, Preserve the Title of the
section, and preserve in the section all the substance and tone of each of the contributor
acknowledgements and/or dedications given therein.
L. Preserve all the Invariant Sections of the Document, unaltered in their text and in their
titles. Section numbers or the equivalent are not considered part of the section titles.
M. Delete any section Entitled “Endorsements”. Such a section may not be included in the
Modiﬁed Version.
N. Do not retitle any existing section to be Entitled “Endorsements” or to conﬂict in title
with any Invariant Section.
O. Preserve any Warranty Disclaimers.
If the Modiﬁed Version includes new front-matter sections or appendices that qualify as
Secondary Sections and contain no material copied from the Document, you may at your option
designate some or all of these sections as invariant. To do this, add their titles to the list of
Invariant Sections in the Modiﬁed Version’s license notice. These titles must be distinct from
any other section titles.
You may add a section Entitled “Endorsements”, provided it contains nothing but endorse-
ments of your Modiﬁed Version by various parties–for example, statements of peer review or
that the text has been approved by an organization as the authoritative deﬁnition of a standard.
You may add a passage of up to ﬁve words as a Front-Cover Text, and a passage of up to
25 words as a Back-Cover Text, to the end of the list of Cover Texts in the Modiﬁed Version.
Only one passage of Front-Cover Text and one of Back-Cover Text may be added by (or through
arrangements made by) any one entity. If the Document already includes a cover text for the
same cover, previously added by you or by arrangement made by the same entity you are acting
on behalf of, you may not add another; but you may replace the old one, on explicit permission
from the previous publisher that added the old one.
The author(s) and publisher(s) of the Document do not by this License give permission to
use their names for publicity for or to assert or imply endorsement of any Modiﬁed Version.
5. COMBINING DOCUMENTS
You may combine the Document with other documents released under this License, under
the terms deﬁned in section 4 above for modiﬁed versions, provided that you include in the
combination all of the Invariant Sections of all of the original documents, unmodiﬁed, and list
them all as Invariant Sections of your combined work in its license notice, and that you preserve
all their Warranty Disclaimers.
The combined work need only contain one copy of this License, and multiple identical In-
variant Sections may be replaced with a single copy. If there are multiple Invariant Sections
with the same name but diﬀerent contents, make the title of each such section unique by adding
at the end of it, in parentheses, the name of the original author or publisher of that section if
known, or else a unique number. Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.
In the combination, you must combine any sections Entitled “History” in the various origi-
nal documents, forming one section Entitled “History”; likewise combine any sections Entitled
“Acknowledgements”, and any sections Entitled “Dedications”. You must delete all sections
Entitled “Endorsements”.
Open∇FOAM-2.1.0
P-7
6. COLLECTIONS OF DOCUMENTS
You may make a collection consisting of the Document and other documents released under
this License, and replace the individual copies of this License in the various documents with a
single copy that is included in the collection, provided that you follow the rules of this License
for verbatim copying of each of the documents in all other respects.
You may extract a single document from such a collection, and distribute it individually
under this License, provided you insert a copy of this License into the extracted document, and
follow this License in all other respects regarding verbatim copying of that document.
7. AGGREGATION WITH INDEPENDENT WORKS
A compilation of the Document or its derivatives with other separate and independent docu-
ments or works, in or on a volume of a storage or distribution medium, is called an “aggregate”
if the copyright resulting from the compilation is not used to limit the legal rights of the com-
pilation’s users beyond what the individual works permit. When the Document is included in
an aggregate, this License does not apply to the other works in the aggregate which are not
themselves derivative works of the Document.
If the Cover Text requirement of section 3 is applicable to these copies of the Document,
then if the Document is less than one half of the entire aggregate, the Document’s Cover Texts
may be placed on covers that bracket the Document within the aggregate, or the electronic
equivalent of covers if the Document is in electronic form. Otherwise they must appear on
printed covers that bracket the whole aggregate.
8. TRANSLATION
Translation is considered a kind of modiﬁcation, so you may distribute translations of the
Document under the terms of section 4. Replacing Invariant Sections with translations requires
special permission from their copyright holders, but you may include translations of some or
all Invariant Sections in addition to the original versions of these Invariant Sections. You
may include a translation of this License, and all the license notices in the Document, and any
Warranty Disclaimers, provided that you also include the original English version of this License
and the original versions of those notices and disclaimers. In case of a disagreement between
the translation and the original version of this License or a notice or disclaimer, the original
version will prevail.
If a section in the Document is Entitled “Acknowledgements”, “Dedications”, or “History”,
the requirement (section 4) to Preserve its Title (section 1) will typically require changing the
actual title.
9. TERMINATION
You may not copy, modify, sublicense, or distribute the Document except as expressly provided
for under this License. Any other attempt to copy, modify, sublicense or distribute the Document
is void, and will automatically terminate your rights under this License. However, parties who
have received copies, or rights, from you under this License will not have their licenses terminated
so long as such parties remain in full compliance.
10. FUTURE REVISIONS OF THIS LICENSE
The Free Software Foundation may publish new, revised versions of the GNU Free Documenta-
tion License from time to time. Such new versions will be similar in spirit to the present version,
but may diﬀer in detail to address new problems or concerns. See http://www.gnu.org/copyleft/.
Each version of the License is given a distinguishing version number. If the Document
speciﬁes that a particular numbered version of this License “or any later version” applies to it,
you have the option of following the terms and conditions either of that speciﬁed version or of
Open∇FOAM-2.1.0
P-8
any later version that has been published (not as a draft) by the Free Software Foundation. If
the Document does not specify a version number of this License, you may choose any version
ever published (not as a draft) by the Free Software Foundation.
Open∇FOAM-2.1.0
P-9
Trademarks
ANSYS is a registered trademark of ANSYS Inc.
CFX is a registered trademark of Ansys Inc.
CHEMKIN is a registered trademark of Reaction Design Corporation
EnSight is a registered trademark of Computational Engineering International Ltd.
Fieldview is a registered trademark of Intelligent Light
Fluent is a registered trademark of Ansys Inc.
GAMBIT is a registered trademark of Ansys Inc.
Icem-CFD is a registered trademark of Ansys Inc.
I-DEAS is a registered trademark of Structural Dynamics Research Corporation
JAVA is a registered trademark of Sun Microsystems Inc.
Linux is a registered trademark of Linus Torvalds
OpenFOAM is a registered trademark of OpenCFD Ltd
ParaView is a registered trademark of Kitware
STAR-CD is a registered trademark of Computational Dynamics Ltd.
UNIX is a registered trademark of The Open Group
Open∇FOAM-2.1.0
P-10
Open∇FOAM-2.1.0
Contents
Copyright Notice P-2
GNU Free Documentation Licence P-3
1. APPLICABILITY AND DEFINITIONS . . . . . . . . . . . . . . . . . P-3
2. VERBATIM COPYING . . . . . . . . . . . . . . . . . . . . . . . . . P-4
3. COPYING IN QUANTITY . . . . . . . . . . . . . . . . . . . . . . . . P-4
4. MODIFICATIONS . . . . . . . . . . . . . . . . . . . . . . . . . . . . P-5
5. COMBINING DOCUMENTS . . . . . . . . . . . . . . . . . . . . . . P-6
6. COLLECTIONS OF DOCUMENTS . . . . . . . . . . . . . . . . . . . P-7
7. AGGREGATION WITH INDEPENDENT WORKS . . . . . . . . . . P-7
8. TRANSLATION . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . P-7
9. TERMINATION . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . P-7
10. FUTURE REVISIONS OF THIS LICENSE . . . . . . . . . . . . . . P-7
Trademarks P-9
Contents P-11
1 Tensor mathematics P-15
1.1 Coordinate system . . . . . . . . . . . . . . . . . . . . . . . . . . . P-15
1.2 Tensors . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . P-15
1.2.1 Tensor notation . . . . . . . . . . . . . . . . . . . . . . . . . P-17
1.3 Algebraic tensor operations . . . . . . . . . . . . . . . . . . . . . . P-17
1.3.1 The inner product . . . . . . . . . . . . . . . . . . . . . . . P-18
1.3.2 The double inner product of two tensors . . . . . . . . . . . P-19
1.3.3 The triple inner product of two third rank tensors . . . . . . P-19
1.3.4 The outer product . . . . . . . . . . . . . . . . . . . . . . . P-19
1.3.5 The cross product of two vectors . . . . . . . . . . . . . . . P-19
1.3.6 Other general tensor operations . . . . . . . . . . . . . . . . P-20
1.3.7 Geometric transformation and the identity tensor . . . . . . P-20
1.3.8 Useful tensor identities . . . . . . . . . . . . . . . . . . . . . P-21
1.3.9 Operations exclusive to tensors of rank 2 . . . . . . . . . . . P-21
1.3.10 Operations exclusive to scalars . . . . . . . . . . . . . . . . . P-22
1.4 OpenFOAM tensor classes . . . . . . . . . . . . . . . . . . . . . . . P-23
1.4.1 Algebraic tensor operations in OpenFOAM . . . . . . . . . . P-23
1.5 Dimensional units . . . . . . . . . . . . . . . . . . . . . . . . . . . . P-25
2 Discretisation procedures P-27
2.1 Diﬀerential operators . . . . . . . . . . . . . . . . . . . . . . . . . . P-27
2.1.1 Gradient . . . . . . . . . . . . . . . . . . . . . . . . . . . . . P-27
2.1.2 Divergence . . . . . . . . . . . . . . . . . . . . . . . . . . . . P-28
P-12 Contents
2.1.3 Curl . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . P-28
2.1.4 Laplacian . . . . . . . . . . . . . . . . . . . . . . . . . . . . P-28
2.1.5 Temporal derivative . . . . . . . . . . . . . . . . . . . . . . . P-28
2.2 Overview of discretisation . . . . . . . . . . . . . . . . . . . . . . . P-29
2.2.1 OpenFOAM lists and ﬁelds . . . . . . . . . . . . . . . . . . P-29
2.3 Discretisation of the solution domain . . . . . . . . . . . . . . . . . P-29
2.3.1 Deﬁning a mesh in OpenFOAM . . . . . . . . . . . . . . . . P-31
2.3.2 Deﬁning a geometricField in OpenFOAM . . . . . . . . . . . P-32
2.4 Equation discretisation . . . . . . . . . . . . . . . . . . . . . . . . . P-33
2.4.1 The Laplacian term . . . . . . . . . . . . . . . . . . . . . . . P-38
2.4.2 The convection term . . . . . . . . . . . . . . . . . . . . . . P-38
2.4.3 First time derivative . . . . . . . . . . . . . . . . . . . . . . P-39
2.4.4 Second time derivative . . . . . . . . . . . . . . . . . . . . . P-39
2.4.5 Divergence . . . . . . . . . . . . . . . . . . . . . . . . . . . . P-39
2.4.6 Gradient . . . . . . . . . . . . . . . . . . . . . . . . . . . . . P-40
2.4.7 Grad-grad squared . . . . . . . . . . . . . . . . . . . . . . . P-41
2.4.8 Curl . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . P-41
2.4.9 Source terms . . . . . . . . . . . . . . . . . . . . . . . . . . P-41
2.4.10 Other explicit discretisation schemes . . . . . . . . . . . . . P-41
2.5 Temporal discretisation . . . . . . . . . . . . . . . . . . . . . . . . . P-42
2.5.1 Treatment of temporal discretisation in OpenFOAM . . . . P-43
2.6 Boundary Conditions . . . . . . . . . . . . . . . . . . . . . . . . . . P-43
2.6.1 Physical boundary conditions . . . . . . . . . . . . . . . . . P-44
3 Examples of the use of OpenFOAM P-45
3.1 Flow around a cylinder . . . . . . . . . . . . . . . . . . . . . . . . . P-45
3.1.1 Problem speciﬁcation . . . . . . . . . . . . . . . . . . . . . . P-46
3.1.2 Note on potentialFoam . . . . . . . . . . . . . . . . . . . . . P-47
3.1.3 Mesh generation . . . . . . . . . . . . . . . . . . . . . . . . P-47
3.1.4 Boundary conditions and initial ﬁelds . . . . . . . . . . . . . P-49
3.1.5 Running the case . . . . . . . . . . . . . . . . . . . . . . . . P-50
3.2 Steady turbulent ﬂow over a backward-facing step . . . . . . . . . . P-53
3.2.1 Problem speciﬁcation . . . . . . . . . . . . . . . . . . . . . . P-53
3.2.2 Mesh generation . . . . . . . . . . . . . . . . . . . . . . . . P-54
3.2.3 Boundary conditions and initial ﬁelds . . . . . . . . . . . . . P-57
3.2.4 Case control . . . . . . . . . . . . . . . . . . . . . . . . . . . P-57
3.2.5 Running the case and post-processing . . . . . . . . . . . . . P-58
3.3 Supersonic ﬂow over a forward-facing step . . . . . . . . . . . . . . P-58
3.3.1 Problem speciﬁcation . . . . . . . . . . . . . . . . . . . . . . P-59
3.3.2 Mesh generation . . . . . . . . . . . . . . . . . . . . . . . . P-60
3.3.3 Running the case . . . . . . . . . . . . . . . . . . . . . . . . P-61
3.3.4 Exercise . . . . . . . . . . . . . . . . . . . . . . . . . . . . . P-61
3.4 Decompression of a tank internally pressurised with water . . . . . P-62
3.4.1 Problem speciﬁcation . . . . . . . . . . . . . . . . . . . . . . P-62
3.4.2 Mesh Generation . . . . . . . . . . . . . . . . . . . . . . . . P-63
3.4.3 Preparing the Run . . . . . . . . . . . . . . . . . . . . . . . P-65
3.4.4 Running the case . . . . . . . . . . . . . . . . . . . . . . . . P-66
3.4.5 Improving the solution by reﬁning the mesh . . . . . . . . . P-67
3.5 Magnetohydrodynamic ﬂow of a liquid . . . . . . . . . . . . . . . . P-67
3.5.1 Problem speciﬁcation . . . . . . . . . . . . . . . . . . . . . . P-68
3.5.2 Mesh generation . . . . . . . . . . . . . . . . . . . . . . . . P-69
Open∇FOAM-2.1.0
Contents P-13
3.5.3 Running the case . . . . . . . . . . . . . . . . . . . . . . . . P-70
Index P-73
Open∇FOAM-2.1.0
P-14 Contents
Open∇FOAM-2.1.0
Chapter 1
Tensor mathematics
This Chapter describes tensors and their algebraic operations and how they are repre-
sented in mathematical text in this book. It then explains how tensors and tensor algebra
are programmed in OpenFOAM.
1.1 Coordinate system
OpenFOAM is primarily designed to solve problems in continuum mechanics, i.e. the
branch of mechanics concerned with the stresses in solids, liquids and gases and the
deformation or ﬂow of these materials. OpenFOAM is therefore based in 3 dimensional
space and time and deals with physical entities described by tensors. The coordinate
system used by OpenFOAM is the right-handed rectangular Cartesian axes as shown in
Figure 1.1. This system of axes is constructed by deﬁning an origin O from which three
lines are drawn at right angles to each other, termed the Ox, Oy, Oz axes. A right-handed
set of axes is deﬁned such that to an observer looking down the Oz axis (with O nearest
them), the arc from a point on the Ox axis to a point on the Oy axis is in a clockwise
sense.
y
z
x
Figure 1.1: Right handed axes
1.2 Tensors
The term tensor describes an entity that belongs to a particular space and obeys certain
mathematical rules. Brieﬂy, tensors are represented by a set of component values relating
to a set of unit base vectors; in OpenFOAM the unit base vectors ix, iy and iz are
P-16 Tensor mathematics
aligned with the right-handed rectangular Cartesian axes x, y and z respectively. The
base vectors are therefore orthogonal, i.e. at right-angles to one another. Every tensor
has the following attributes:
Dimension d of the particular space to which they belong, i.e. d = 3 in OpenFOAM;
Rank An integer r ≥ 0, such that the number of component values = dr
.
While OpenFOAM 1.x is set to 3 dimensions, it oﬀers tensors of ranks 0 to 3 as
standard while being written in such a way to allow this basic set of ranks to be extended
indeﬁnitely. Tensors of rank 0 and 1, better known as scalars and vectors, should be
familiar to readers; tensors of rank 2 and 3 may not be so familiar. For completeness all
ranks of tensor oﬀered as standard in OpenFOAM 1.x are reviewed below.
Rank 0 ‘scalar’ Any property which can be represented by a single real number, de-
noted by characters in italics, e.g. mass m, volume V , pressure p and viscosity
µ.
Rank 1 ‘vector’ An entity which can be represented physically by both magnitude and
direction. In component form, the vector a = (a1, a2, a3) relates to a set of Cartesian
axes x, y, z respectively. The index notation presents the same vector as ai, i =
1, 2, 3, although the list of indices i = 1, 2, 3 will be omitted in this book, as it is
intuitive since we are always dealing with 3 dimensions.
Rank 2 ‘tensor’ or second rank tensor, T has 9 components which can be expressed in
array notation as:
T = Tij =


T11 T12 T13
T21 T22 T23
T31 T32 T33

 (1.1)
The components Tij are now represented using 2 indices since r = 2 and the list
of indices i, j = 1, 2, 3 is omitted as before. The components for which i = j are
referred to as the diagonal components, and those for which i = j are referred to
as the oﬀ-diagonal components. The transpose of T is produced by exchanging
components across the diagonal such that
TT
= Tji =


T11 T21 T31
T12 T22 T32
T13 T23 T33

 (1.2)
Note: a rank 2 tensor is often colloquially termed ‘tensor’ since the occurrence of
higher order tensors is fairly rare.
Symmetric rank 2 The term ‘symmetric’ refers to components being symmetric about
the diagonal, i.e. Tij = Tji. In this case, there are only 6 independent components
since T12 = T21, T13 = T31 and T23 = T32. OpenFOAM distinguishes between
symmetric and non-symmetric tensors to save memory by storing 6 components
rather than 9 if the tensor is symmetric. Most tensors encountered in continuum
mechanics are symmetric.
Rank 3 has 27 components and is represented in index notation as Pijk which is too long
to represent in array notation as in Equation 1.1.
Symmetric rank 3 Symmetry of a rank 3 tensor is deﬁned in OpenFOAM to mean
that Pijk = Pikj = Pjik = Pjki = Pkij = Pkji and therefore has 10 independent
components. More speciﬁcally, it is formed by the outer product of 3 identical
vectors, where the outer product operation is described in Section 1.3.4.
Open∇FOAM-2.1.0
1.3 Algebraic tensor operations P-17
1.2.1 Tensor notation
This is a book on computational continuum mechanics that deals with problems involving
complex PDEs in 3 spatial dimensions and in time. It is vital from the beginning to adopt
a notation for the equations which is compact yet unambiguous. To make the equations
easy to follow, we must use a notation that encapsulates the idea of a tensor as an entity in
the own right, rather than a list of scalar components. Additionally, any tensor operation
should be perceived as an operation on the entire tensor entity rather than a series of
operations on its components.
Consequently, in this book the tensor notation is preferred in which any tensor of
rank 1 and above, i.e. all tensors other than scalars, are represented by letters in bold
face, e.g. a. This actively promotes the concept of a tensor as a entity in its own right
since it is denoted by a single symbol, and it is also extremely compact. The potential
drawback is that the rank of a bold face symbol is not immediately apparent, although it
is clearly not zero. However, in practice this presents no real problem since we are aware
of the property each symbol represents and therefore intuitively know its rank, e.g. we
know velocity U is a tensor of rank 1.
A further, more fundamental idea regarding the choice of notation is that the mathe-
matical representation of a tensor should not change depending on our coordinate system,
i.e. the vector ais the same vector irrespective of where we view it from. The tensor no-
tation supports this concept as it implies nothing about the coordinate system. However,
other notations, e.g. ai, expose the individual components of the tensor which naturally
implies the choice of coordinate system. The unsatisfactory consequence of this is that
the tensor is then represented by a set of values which are not unique — they depend on
the coordinate system.
That said, the index notation, introduced in Section 1.2, is adopted from time to
time in this book mainly to expand tensor operations into the constituent components.
When using the index notation, we adopt the summation convention which states that
whenever the same letter subscript occurs twice in a term, the that subscript is to be
given all values, i.e. 1, 2, 3, and the results added together, e.g.
aibi =
3
i=1
aibi = a1b1 + a2b2 + a3b3 (1.3)
In the remainder of the book the symbol is omitted since the repeated subscript
indicates the summation.
1.3 Algebraic tensor operations
This section describes all the algebraic operations for tensors that are available in Open-
FOAM. Let us ﬁrst review the most simple tensor operations: addition, subtraction,
and scalar multiplication and division. Addition and subtraction are both commutative
and associative and are only valid between tensors of the same rank. The operations
are performed by addition/subtraction of respective components of the tensors, e.g. the
subtraction of two vectors a and b is
a − b = ai − bi = (a1 − b1, a2 − b2, a3 − b3) (1.4)
Multiplication of any tensor a by a scalar s is also commutative and associative and is
performed by multiplying all the tensor components by the scalar. For example,
sa = sai = (sa1, sa2, sa3) (1.5)
Open∇FOAM-2.1.0
P-18 Tensor mathematics
Division between a tensor a and a scalar is only relevant when the scalar is the second
argument of the operation, i.e.
a/s = ai/s = (a1/s, a2/s, a3/s) (1.6)
Following these operations are a set of more complex products between tensors of rank 1
and above, described in the following Sections.
1.3.1 The inner product
The inner product operates on any two tensors of rank r1 and r2 such that the rank of the
result r = r1 + r2 − 2. Inner product operations with tensors up to rank 3 are described
below:
• The inner product of two vectors a and b is commutative and produces a scalar
s = a • b where
s = aibi = a1b1 + a2b2 + a3b3 (1.7)
• The inner product of a tensor T and vector a produces a vector b = T • a, repre-
sented below as a column array for convenience
bi = Tijaj =


T11a1 + T12a2 + T13a3
T21a1 + T22a2 + T23a3
T31a1 + T32a2 + T33a3

 (1.8)
It is non-commutative if T is non-symmetric such that b = a • T = TT • a is
bi = ajTji =


a1T11 + a2T21 + a3T31
a1T12 + a2T22 + a3T32
a1T13 + a2T23 + a3T33

 (1.9)
• The inner product of two tensors T and S produces a tensor P = T • S whose
components are evaluated as:
Pij = TikSkj (1.10)
It is non-commutative such that T • S = ST • TT T
• The inner product of a vector a and third rank tensor P produces a second rank
tensor T = a • P whose components are
Tij = akPkij (1.11)
Again this is non-commutative so that T = P • a is
Tij = Pijkak (1.12)
• The inner product of a second rank tensor T and third rank tensor P produces a
third rank tensor Q = T • P whose components are
Qijk = TilPljk (1.13)
Again this is non-commutative so that Q = P • T is
Qijk = PijlTlk (1.14)
Open∇FOAM-2.1.0
1.3 Algebraic tensor operations P-19
1.3.2 The double inner product of two tensors
The double inner product of two second-rank tensors T and S produces a scalar s = T •
• S
which can be evaluated as the sum of the 9 products of the tensor components
s = TijSij = T11S11 + T12S12 + T13S13 +
T21S21 + T22S22 + T23S23 +
T31S31 + T32S32 + T33S33
(1.15)
The double inner product between a second rank tensor T and third rank tensor P
produces a vector a = T •
• P with components
ai = TjkPjki (1.16)
This is non-commutative so that a = P •
• T is
ai = PijkTjk (1.17)
1.3.3 The triple inner product of two third rank tensors
The triple inner product of two third rank tensors P and Q produces a scalar s = P 3
• Q
which can be evaluated as the sum of the 27 products of the tensor components
s = PijkQijk (1.18)
1.3.4 The outer product
The outer product operates between vectors and tensors as follows:
• The outer product of two vectors a and b is non-commutative and produces a tensor
T = ab = (ba)T
whose components are evaluated as:
Tij = aibj =


a1b1 a1b2 a1b3
a2b1 a2b2 a2b3
a3b1 a3b2 a3b3

 (1.19)
• An outer product of a vector a and second rank tensor T produces a third rank
tensor P = aT whose components are
Pijk = aiTjk (1.20)
This is non-commutative so that P = T a produces
Pijk = Tijak (1.21)
1.3.5 The cross product of two vectors
The cross product operation is exclusive to vectors only. For two vectors a with b, it
produces a vector c = a × b whose components are
ci = eijkajbk = (a2b3 − a3b2, a3b1 − a1b3, a1b2 − a2b1) (1.22)
where the permutation symbol is deﬁned by
eijk =



0 when any two indices are equal
+1 when i,j,k are an even permutation of 1,2,3
−1 when i,j,k are an odd permutation of 1,2,3
(1.23)
in which the even permutations are 123, 231 and 312 and the odd permutations are 132,
213 and 321.
Open∇FOAM-2.1.0
P-20 Tensor mathematics
1.3.6 Other general tensor operations
Some less common tensor operations and terminology used by OpenFOAM are described
below.
Square of a tensor is deﬁned as the outer product of the tensor with itself, e.g. for a
vector a, the square a2
= aa.
nth power of a tensor is evaluated by n outer products of the tensor, e.g. for a vector
a, the 3rd power a3
= aaa.
Magnitude squared of a tensor is the rth inner product of the tensor of rank r with
itself, to produce a scalar. For example, for a second rank tensor T, |T|2
= T •
• T.
Magnitude is the square root of the magnitude squared, e.g. for a tensor T, |T| =√
T •
• T. Vectors of unit magnitude are referred to as unit vectors.
Component maximum is the component of the tensor with greatest value, inclusive
of sign, i.e. not the largest magnitude.
Component minimum is the component of the tensor with smallest value.
Component average is the mean of all components of a tensor.
Scale As the name suggests, the scale function is a tool for scaling the components of
one tensor by the components of another tensor of the same rank. It is evaluated
as the product of corresponding components of 2 tensors, e.g., scaling vector a by
vector b would produce vector c whose components are
ci = scale(a, b) = (a1b1, a2b2, a3b3) (1.24)
1.3.7 Geometric transformation and the identity tensor
A second rank tensor T is strictly deﬁned as a linear vector function, i.e. it is a function
which associates an argument vector a to another vector b by the inner product b = T • a.
The components of T can be chosen to perform a speciﬁc geometric transformation of
a tensor from the x, y, z coordinate system to a new coordinate system x∗
, y∗
, z∗
; T is
then referred to as the transformation tensor. While a scalar remains unchanged under
a transformation, the vector a is transformed to a∗
by
a∗
= T • a (1.25)
A second rank tensor S is transformed to S∗
according to
S∗
= T • S • TT
(1.26)
The identity tensor I is deﬁned by the requirement that it transforms another tensor
onto itself. For all vectors a
a = I • a (1.27)
and therefore
I = δij =


1 0 0
0 1 0
0 0 1

 (1.28)
where δij is known as the Kronecker delta symbol.
Open∇FOAM-2.1.0
1.3 Algebraic tensor operations P-21
1.3.8 Useful tensor identities
Several identities are listed below which can be veriﬁed by under the assumption that all
the relevant derivatives exist and are continuous. The identities are expressed for scalar
s and vector a.
∇ • (∇ × a) ≡ 0
∇ × (∇s) ≡ 0
∇ • (sa) ≡ s∇ • a + a • ∇s
∇ × (sa) ≡ s∇ × a + ∇s × a
∇(a • b) ≡ a × (∇ × b) + b × (∇ × a) + (a • ∇)b + (b • ∇)a
∇ • (a × b) ≡ b • (∇ × a) − a • (∇ × b)
∇ × (a × b) ≡ a(∇ • b) − b(∇ • a) + (b • ∇)a − (a • ∇)b
∇ × (∇ × a) ≡ ∇(∇ • a) − ∇2
a
(∇ × a) × a ≡ a • (∇a) − ∇(a • a)
(1.29)
It is sometimes useful to know the e−δ identity to help to manipulate equations in index
notation:
eijkeirs = δjrδks − δjsδkr (1.30)
1.3.9 Operations exclusive to tensors of rank 2
There are several operations that manipulate the components of tensors of rank 2 that
are listed below:
Transpose of a tensor T = Tij is TT
= Tji as described in Equation 1.2.
Symmetric and skew (antisymmetric) tensors As discussed in section 1.2, a tensor
is said to be symmetric if its components are symmetric about the diagonal, i.e.
T = TT
. A skew or antisymmetric tensor has T = −TT
which intuitively implies
that T11 = T22 = T33 = 0. Every second order tensor can be decomposed into
symmetric and skew parts by
T =
1
2
(T + TT
)
symmetric
+
1
2
(T − TT
)
skew
= symm T + skew T (1.31)
Trace The trace of a tensor T is a scalar, evaluated by summing the diagonal components
tr T = T11 + T22 + T33 (1.32)
Diagonal returns a vector whose components are the diagonal components of the second
rank tensor T
diag T = (T11, T22, T33) (1.33)
Deviatoric and hydrostatic tensors Every second rank tensor T can be decomposed
into a deviatoric component, for which tr T = 0 and a hydrostatic component of
the form T = sI where s is a scalar. Every second rank tensor can be decomposed
into deviatoric and hydrostatic parts as follows:
T = T −
1
3
(tr T) I
deviatoric
+
1
3
(tr T) I
hydrostatic
= dev T + hyd T (1.34)
Open∇FOAM-2.1.0
P-22 Tensor mathematics
Determinant The determinant of a second rank tensor is evaluated by
det T =
T11 T12 T13
T21 T22 T23
T31 T32 T33
= T11(T22T33 − T23T32) −
T12(T21T33 − T23T31) +
T13(T21T32 − T22T31)
=
1
6
eijkepqrTipTjqTkr
(1.35)
Cofactors The minors of a tensor are evaluated for each component by deleting the row
and column in which the component is situated and evaluating the resulting entries
as a 2 × 2 determinant. For example, the minor of T12 is
T11 T12 T13
T21 T22 T23
T31 T32 T33
=
T21 T23
T31 T33
= T21T33 − T23T31 (1.36)
The cofactors are signed minors where each minor is component is given a sign
based on the rule
+ve if i + j is even
−ve if i + j is odd
(1.37)
The cofactors of T can be evaluated as
cof T =
1
2
ejkreistTskTtr (1.38)
Inverse The inverse of a tensor can be evaluated as
inv T =
cof TT
det T
(1.39)
Hodge dual of a tensor is a vector whose components are
∗ T = (T23, −T13, T12) (1.40)
1.3.10 Operations exclusive to scalars
OpenFOAM supports most of the well known functions that operate on scalars, e.g. square
root, exponential, logarithm, sine, cosine etc.., a list of which can be found in Table 1.2.
There are 3 additional functions deﬁned within OpenFOAM that are described below:
Sign of a scalar s is
sgn(s) =
1 if s ≥ 0,
−1 if s < 0.
(1.41)
Positive of a scalar s is
pos(s) =
1 if s ≥ 0,
0 if s < 0.
(1.42)
Limit of a scalar s by the scalar n
limit(s, n) =
s if s < n,
0 if s ≥ n.
(1.43)
Open∇FOAM-2.1.0
1.4 OpenFOAM tensor classes P-23
1.4 OpenFOAM tensor classes
OpenFOAM contains a C++ class library primitive that contains the classes for the tensor
mathematics described so far. The basic tensor classes that are available as standard in
OpenFOAM are listed in Table 1.1. The Table also lists the functions that allow the user
to access individual components of a tensor, known as access functions.
Rank Common name Basic class Access functions
0 Scalar scalar
1 Vector vector x(), y(), z()
2 Tensor tensor xx(), xy(), xz(). . .
Table 1.1: Basic tensor classes in OpenFOAM
We can declare the tensor
T =


1 2 3
4 5 6
7 8 9

 (1.44)
in OpenFOAM by the line:
tensor T(1, 2, 3, 4, 5, 6, 7, 8, 9);
We can then access the component T13, or Txz using the xz() access function. For
instance the code
Info << ``Txz = '' << T.xz() << endl;
outputs to the screen:
Txz = 3
1.4.1 Algebraic tensor operations in OpenFOAM
The algebraic operations described in Section 1.3 are all available to the OpenFOAM
tensor classes using syntax which closely mimics the notation used in written mathematics.
Some functions are represented solely by descriptive functions, e.g.symm(), but others can
also be executed using symbolic operators, e.g.*. All functions are listed in Table 1.2.
Operation Comment Mathematical Description
Description in OpenFOAM
Addition a + b a + b
Subtraction a − b a - b
Scalar multiplication sa s * a
Scalar division a/s a / s
Outer product rank a, b >= 1 ab a * b
Inner product rank a, b >= 1 a • b a & b
Double inner product rank a, b >= 2 a •
• b a && b
Cross product rank a, b = 1 a × b a ^ b
Square a2
sqr(a)
Continued on next page
Open∇FOAM-2.1.0
P-24 Tensor mathematics
Continued from previous page
Operation Comment Mathematical Description
Description in OpenFOAM
Magnitude squared |a|2
magSqr(a)
Magnitude |a| mag(a)
Power n = 0, 1, ..., 4 an
pow(a,n)
Component average i = 1, ..., N ai cmptAv(a)
Component maximum i = 1, ..., N max(ai) max(a)
Component minimum i = 1, ..., N min(ai) min(a)
Scale scale(a,b) scale(a,b)
Geometric transformation transforms a using tensor T transform(T,a)
Operations exclusive to tensors of rank 2
Transpose TT
T.T()
Diagonal diag T diag(T)
Trace tr T tr(T)
Deviatoric component dev T dev(T)
Symmetric component symm T symm(T)
Skew-symmetric component skew T skew(T)
Determinant det T det(T)
Cofactors cof T cof(T)
Inverse inv T inv(T)
Hodge dual ∗ T *T
Operations exclusive to scalars
Sign (boolean) sgn(s) sign(s)
Positive (boolean) s >= 0 pos(s)
Negative (boolean) s < 0 neg(s)
Limit n scalar limit(s, n) limit(s,n)
Square root
√
s sqrt(s)
Exponential exp s exp(s)
Natural logarithm ln s log(s)
Base 10 logarithm log10 s log10(s)
Sine sin s sin(s)
Cosine cos s cos(s)
Tangent tan s tan(s)
Arc sine asin s asin(s)
Arc cosine acos s acos(s)
Arc tangent atan s atan(s)
Hyperbolic sine sinh s sinh(s)
Hyperbolic cosine cosh s cosh(s)
Hyperbolic tangent tanh s tanh(s)
Hyperbolic arc sine asinh s asinh(s)
Hyperbolic arc cosine acosh s acosh(s)
Hyperbolic arc tangent atanh s atanh(s)
Error function erf s erf(s)
Complement error function erfc s erfc(s)
Logarithm gamma function ln Γs lgamma(s)
Type 1 Bessel function of order 0 J0 s j0(s)
Type 1 Bessel function of order 1 J1 s j1(s)
Continued on next page
Open∇FOAM-2.1.0
1.5 Dimensional units P-25
Continued from previous page
Operation Comment Mathematical Description
Description in OpenFOAM
Type 2 Bessel function of order 0 Y0 s y0(s)
Type 2 Bessel function of order 1 Y1 s y1(s)
a, b are tensors of arbitrary rank unless otherwise stated
s is a scalar, N is the number of tensor components
Table 1.2: Algebraic tensor operations in OpenFOAM
1.5 Dimensional units
In continuum mechanics, properties are represented in some chosen units, e.g. mass in
kilograms (kg), volume in cubic metres (m3
), pressure in Pascals (kg m s−2
). Algebraic
operations must be performed on these properties using consistent units of measurement;
in particular, addition, subtraction and equality are only physically meaningful for prop-
erties of the same dimensional units. As a safeguard against implementing a meaningless
operation, OpenFOAM encourages the user to attach dimensional units to any tensor and
will then perform dimension checking of any tensor operation.
Units are deﬁned using the dimensionSet class, e.g.
dimensionSet pressureDims(1, -1, -2, 0, 0, 0, 0);
No. Property Unit Symbol
1 Mass kilogram k
2 Length metre m
3 Time second s
4 Temperature Kelvin K
5 Quantity moles mol
6 Current ampere A
7 Luminous intensity candela cd
Table 1.3: S.I. base units of measurement
where each of the values corresponds to the power of each of the S.I. base units of
measurement listed in Table 1.3. The line of code declares pressureDims to be the
dimensionSet for pressure kg m s−2
since the ﬁrst entry in the pressureDims array, 1,
corresponds to k1
, the second entry, -1, corresponds to m−1
etc.. A tensor with units
is deﬁned using the dimensioned<Type> template class, the <Type> being scalar, vector,
tensor, etc.. The dimensioned<Type> stores a variable name of class word,the value <Type>
and a dimensionSet
dimensionedTensor sigma
(
"sigma",
dimensionSet(1, -1, -2, 0, 0, 0, 0),
tensor(1e6,0,0,0,1e6,0,0,0,1e6),
);
Open∇FOAM-2.1.0
P-26 Tensor mathematics
creates a tensor with correct dimensions of pressure, or stress
σ =


106
0 0
0 106
0
0 0 106

 (1.45)
Open∇FOAM-2.1.0
Chapter 2
Discretisation procedures
So far we have dealt with algebra of tensors at a point. The PDEs we wish to solve involve
derivatives of tensors with respect to time and space. We therefore need to extend our
description to a tensor ﬁeld, i.e. a tensor that varies across time and spatial domains.
In this Chapter we will ﬁrst present a mathematical description of all the diﬀerential
operators we may encounter. We will then show how a tensor ﬁeld is constructed in
OpenFOAM and how the derivatives of these ﬁelds are discretised into a set of algebraic
equations.
2.1 Diﬀerential operators
Before deﬁning the spatial derivatives we ﬁrst introduce the nabla vector operator ∇,
represented in index notation as ∂i:
∇ ≡ ∂i ≡
∂
∂xi
≡
∂
∂x1
,
∂
∂x2
,
∂
∂x3
(2.1)
The nabla operator is a useful notation that obeys the following rules:
• it operates on the tensors to its right and the conventional rules of a derivative of
a product, e.g. ∂iab = (∂ia) b + a (∂ib);
• otherwise the nabla operator behaves like any other vector in an algebraic operation.
2.1.1 Gradient
If a scalar ﬁeld s is deﬁned and continuously diﬀerentiable then the gradient of s, ∇s is
a vector ﬁeld
∇s = ∂is =
∂s
∂x1
,
∂s
∂x2
,
∂s
∂x3
(2.2)
The gradient can operate on any tensor ﬁeld to produce a tensor ﬁeld that is one rank
higher. For example, the gradient of a vector ﬁeld a is a second rank tensor ﬁeld
∇a = ∂iaj =


∂a1/∂x1 ∂a2/∂x1 ∂a3/∂x1
∂a1/∂x2 ∂a2/∂x2 ∂a3/∂x2
∂a1/∂x3 ∂a2/∂x3 ∂a3/∂x3

 (2.3)
P-28 Discretisation procedures
2.1.2 Divergence
If a vector ﬁeld a is deﬁned and continuously diﬀerentiable then the divergence of a is a
scalar ﬁeld
∇ • a = ∂iai =
∂a1
∂x1
+
∂a2
∂x2
+
∂a3
∂x3
(2.4)
The divergence can operate on any tensor ﬁeld of rank 1 and above to produce a
tensor that is one rank lower. For example the divergence of a second rank tensor ﬁeld
T is a vector ﬁeld (expanding the vector as a column array for convenience)
∇ • T = ∂iTij =


∂T11/∂x1 + ∂T12/∂x1 + ∂T13/∂x1
∂T21/∂x2 + ∂T22/∂x2 + ∂T23/∂x2
∂T31/∂x3 + ∂T32/∂x3 + ∂T33/∂x3

 (2.5)
2.1.3 Curl
If a vector ﬁeld a is deﬁned and continuously diﬀerentiable then the curl of a, ∇ × a is a
vector ﬁeld
∇ × a = eijk∂jak =
∂a3
∂x2
−
∂a2
∂x3
,
∂a1
∂x3
−
∂a3
∂x1
,
∂a2
∂x1
−
∂a1
∂x2
(2.6)
The curl is related to the gradient by
∇ × a = 2 (∗ skew ∇a) (2.7)
2.1.4 Laplacian
The Laplacian is an operation that can be deﬁned mathematically by a combination of
the divergence and gradient operators by ∇2
≡ ∇ • ∇. However, the Laplacian should be
considered as a single operation that transforms a tensor ﬁeld into another tensor ﬁeld of
the same rank, rather than a combination of two operations, one which raises the rank
by 1 and one which reduces the rank by 1.
In fact, the Laplacian is best deﬁned as a scalar operator, just as we deﬁned nabla as
a vector operator, by
∇2
≡ ∂2
≡
∂2
∂x2
1
+
∂2
∂x2
2
+
∂2
∂x2
3
(2.8)
For example, the Laplacian of a scalar ﬁeld s is the scalar ﬁeld
∇2
s = ∂2
s =
∂2
s
∂x2
1
+
∂2
s
∂x2
2
+
∂2
s
∂x2
3
(2.9)
2.1.5 Temporal derivative
There is more than one deﬁnition of temporal, or time, derivative of a tensor. To describe
the temporal derivatives we must ﬁrst recall that the tensor relates to a property of a
volume of material that may be moving. If we track an inﬁnitesimally small volume of
material, or particle, as it moves and observe the change in the tensorial property φ in
time, we have the total, or material time derivative denoted by
Dφ
Dt
= lim
∆t→0
∆φ
∆t
(2.10)
Open∇FOAM-2.1.0
2.2 Overview of discretisation P-29
However in continuum mechanics, particularly ﬂuid mechanics, we often observe the
change of a φ in time at a ﬁxed point in space as diﬀerent particles move across that
point. This change at a point in space is termed the spatial time derivative which is
denoted by ∂/∂t and is related to the material derivative by:
Dφ
Dt
=
∂φ
∂t
+ U • ∇φ (2.11)
where U is the velocity ﬁeld of property φ. The second term on the right is known as the
convective rate of change of φ.
2.2 Overview of discretisation
The term discretisation means approximation of a problem into discrete quantities. The
FV method and others, such as the ﬁnite element and ﬁnite diﬀerence methods, all
discretise the problem as follows:
Spatial discretisation Deﬁning the solution domain by a set of points that ﬁll and
bound a region of space when connected;
Temporal discretisation (For transient problems) dividing the time domain into into
a ﬁnite number of time intervals, or steps;
Equation discretisation Generating a system of algebraic equations in terms of dis-
crete quantities deﬁned at speciﬁc locations in the domain, from the PDEs that
characterise the problem.
2.2.1 OpenFOAM lists and ﬁelds
OpenFOAM frequently needs to store sets of data and perform functions, such as mathe-
matical operations, on the data. OpenFOAM therefore provides an array template class
List<Type>, making it possible to create a list of any object of class Type that inherits
the functions of the Type. For example a List of vector is List<vector>.
Lists of the tensor classes are deﬁned as standard in OpenFOAM by the template class
Field<Type>. For better code legibility, all instances of Field<Type>, e.g.Field<vector>, are
renamed using typedef declarations as scalarField, vectorField, tensorField, symmTensor-
Field, tensorThirdField and symmTensorThirdField. Algebraic operations can be performed
between Fields subject to obvious restrictions such as the ﬁelds having the same number
of elements. OpenFOAM also supports operations between a ﬁeld and single tensor, e.g.
all values of a Field U can be multiplied by the scalar 2 with the operation U = 2.0 * U.
2.3 Discretisation of the solution domain
Discretisation of the solution domain is shown in Figure 2.1. The space domain is discre-
tised into computational mesh on which the PDEs are subsequently discretised. Discreti-
sation of time, if required, is simple: it is broken into a set of time steps ∆t that may
change during a numerical simulation, perhaps depending on some condition calculated
during the simulation.
On a more detailed level, discretisation of space requires the subdivision of the domain
into a number of cells, or control volumes. The cells are contiguous, i.e. they do not
overlap one another and completely ﬁll the domain. A typical cell is shown in Figure 2.2.
Open∇FOAM-2.1.0
P-30 Discretisation procedures
z
y
x
Space domain
t
Time domain
∆t
Figure 2.1: Discretisation of the solution domain
N
SfP
f
d
Figure 2.2: Parameters in ﬁnite volume discretisation
Open∇FOAM-2.1.0
2.3 Discretisation of the solution domain P-31
Dependent variables and other properties are principally stored at the cell centroid P
although they may be stored on faces or vertices. The cell is bounded by a set of ﬂat
faces, given the generic label f. In OpenFOAM there is no limitation on the number of
faces bounding each cell, nor any restriction on the alignment of each face. This kind
of mesh is often referred to as “arbitrarily unstructured” to diﬀerentiate it from meshes
in which the cell faces have a prescribed alignment, typically with the coordinate axes.
Codes with arbitrarily unstructured meshes oﬀer greater freedom in mesh generation and
manipulation in particular when the geometry of the domain is complex or changes over
time.
Whilst most properties are deﬁned at the cell centroids, some are deﬁned at cell faces.
There are two types of cell face.
Internal faces Those faces that connect two cells (and it can never be more than two).
For each internal face, OpenFOAM designates one adjoining cell to be the face
owner and the other to be the neighbour;
Boundary faces Those belonging to one cell since they coincide with the boundary of
the domain. These faces simply have an owner cell.
2.3.1 Deﬁning a mesh in OpenFOAM
There are diﬀerent levels of mesh description in OpenFOAM, beginning with the most
basic mesh class, named polyMesh since it is based on polyhedra. A polyMesh is con-
structed using the minimum information required to deﬁne the mesh geometry described
below and presented in Figure 2.3:
Points A list of cell vertex point coordinate vectors, i.e. a vectorField, that is renamed
pointField using a typedef declaration;
Faces A list of cell faces List<face>, or faceList, where the face class is deﬁned by a list
of vertex numbers, corresponding to the pointField;
Cells a list of cells List<cell>, or cellList, where the cell class is deﬁned by a list of face
numbers, corresponding to the faceList described previously.
Boundary a polyBoundaryMesh decomposed into a list of patches, polyPatchList rep-
resenting diﬀerent regions of the boundary. The boundary is subdivided in this
manner to allow diﬀerent boundary conditions to be speciﬁed on diﬀerent patches
during a solution. All the faces of any polyPatch are stored as a single block of the
faceList, so that its faces can be easily accessed using the slice class which stores
references to the ﬁrst and last face of the block. Each polyPatch is then constructed
from
• a slice;
• a word to assign it a name.
FV discretisation uses speciﬁc data that is derived from the mesh geometry stored in
polyMesh. OpenFOAM therefore extends the polyMesh class to fvMesh which stores the
additional data needed for FV discretisation. fvMesh is constructed from polyMesh and
stores the data in Table 2.1 which can be updated during runtime in cases where the
mesh moves, is reﬁned etc..
Open∇FOAM-2.1.0
P-32 Discretisation procedures
Patch 3
Patch 2
pointField faceList
polyPatchList
Boundary
Patch 1
Patch 2
Patch 3
FacesPoints Cells
Internal
...
Boundary
...
...
...
slice
Patch 1
......
... ...
...
cellList
Figure 2.3: Schematic of the basic mesh description used in OpenFOAM
2.3.2 Deﬁning a geometricField in OpenFOAM
So far we can deﬁne a ﬁeld, i.e. a list of tensors, and a mesh. These can be combined to
deﬁne a tensor ﬁeld relating to discrete points in our domain, speciﬁed in OpenFOAM
by the template class geometricField<Type>. The Field values are separated into those
deﬁned within the internal region of the domain, e.g. at the cell centres, and those deﬁned
on the domain boundary, e.g. on the boundary faces. The geometricField<Type> stores
the following information:
Internal ﬁeld This is simply a Field<Type>, described in Section 2.2.1;
BoundaryField This is a GeometricBoundaryField, in which a Field is deﬁned for the
faces of each patch and a Field is deﬁned for the patches of the boundary. This
is then a ﬁeld of ﬁelds, stored within an object of the FieldField<Type> class. A
reference to the fvBoundaryMesh is also stored [**].
Mesh A reference to an fvMesh, with some additional detail as to the whether the ﬁeld
is deﬁned at cell centres, faces, etc..
Dimensions A dimensionSet, described in Section 4.2.6.
Old values Discretisation of time derivatives requires ﬁeld data from previous time steps.
The geometricField<Type> will store references to stored ﬁelds from the previous,
or old, time step and its previous, or old-old, time step where necessary.
Open∇FOAM-2.1.0
2.4 Equation discretisation P-33
Class Description Symbol Access function
volScalarField Cell volumes V V()
surfaceVectorField Face area vectors Sf Sf()
surfaceScalarField Face area magnitudes |Sf | magSf()
volVectorField Cell centres C C()
surfaceVectorField Face centres Cf Cf()
surfaceScalarField Face motion ﬂuxes ** φg phi()
Table 2.1: fvMesh stored data.
Previous iteration values The iterative solution procedures can use under-relaxation
which requires access to data from the previous iteration. Again, if required, geo-
metricField<Type> stores a reference to the data from the previous iteration.
As discussed in Section 2.3, we principally deﬁne a property at the cell centres but quite
often it is stored at the cell faces and on occasion it is deﬁned on cell vertices. The
geometricField<Type> is renamed using typedef declarations to indicate where the ﬁeld
variable is deﬁned as follows:
volField<Type> A ﬁeld deﬁned at cell centres;
surfaceField<Type> A ﬁeld deﬁned on cell faces;
pointField<Type> A ﬁeld deﬁned on cell vertices.
These typedef ﬁeld classes of geometricField<Type>are illustrated in Figure 2.4. A
geometricField<Type> inherits all the tensor algebra of Field<Type> and has all operations
subjected to dimension checking using the dimensionSet. It can also be subjected to the
FV discretisation procedures described in the following Section. The class structure used
to build geometricField<Type> is shown in Figure 2.51
.
2.4 Equation discretisation
Equation discretisation converts the PDEs into a set of algebraic equations that are
commonly expressed in matrix form as:
[A] [x] = [b] (2.12)
where [A] is a square matrix, [x] is the column vector of dependent variable and [b] is
the source vector. The description of [x] and [b] as ‘vectors’ comes from matrix termi-
nology rather than being a precise description of what they truly are: a list of values
deﬁned at locations in the geometry, i.e. a geometricField<Type>, or more speciﬁcally a
volField<Type> when using FV discretisation.
[A] is a list of coeﬃcients of a set of algebraic equations, and cannot be described as a
geometricField<Type>. It is therefore given a class of its own: fvMatrix. fvMatrix<Type>
is created through discretisation of a geometric<Type>Field and therefore inherits the
<Type>. It supports many of the standard algebraic matrix operations of addition +,
subtraction - and multiplication *.
Each term in a PDE is represented individually in OpenFOAM code using the classes
of static functions ﬁniteVolumeMethod and ﬁniteVolumeCalculus, abbreviated by a typedef
1
The diagram is not an exact description of the class hierarchy, rather a representation of the general
structure leading from some primitive classes to geometric<Type>Field.
Open∇FOAM-2.1.0
P-34 Discretisation procedures
Internal ﬁeld
Boundary ﬁeld
Patch 1
Patch 2
Patch 1
Patch 2
(a) A volField<Type>
Internal ﬁeld
Boundary ﬁeld
Patch 1
Patch 2
Patch 1
Patch 2
(b) A surfaceField<Type>
Internal ﬁeld
Boundary ﬁeld
Patch 1
Patch 2
Patch 1
Patch 2
(c) A pointField<Type>
Figure 2.4: Types of geometricField<Type> deﬁned on a mesh with 2 boundary patches
(in 2 dimensions for simplicity)
Open∇FOAM-2.1.0
2.4 Equation discretisation P-35
polyMesh
labelList
<Type>
scalar
vector
tensor
symmTensor
tensorThird
symmTensorThird
dimensioned<Type>
cell
fvBoundaryMesh
polyBoundaryMesh
polyPatch
slice
polyPatchListcellListfaceList
face
fvPatchList
fvPatch
List
pointField
wordlabel
fvMesh
geometricField<Type>
Field<Type>
fvPatchField
dimensionSet
geometricBoundaryField<Type>
Figure 2.5: Basic class structure leading to geometricField<Type>
Open∇FOAM-2.1.0
P-36 Discretisation procedures
to fvm and fvc respectively. fvm and fvc contain static functions, representing diﬀerential
operators, e.g. ∇2
, ∇ • and ∂/∂t, that discretise geometricField<Type>s. The purpose of
deﬁning these functions within two classes, fvm and fvc, rather than one, is to distinguish:
• functions of fvm that calculate implicit derivatives of and return an fvMatrix<Type>
• some functions of fvc that calculate explicit derivatives and other explicit calcula-
tions, returning a geometricField<Type>.
Figure 2.6 shows a geometricField<Type> deﬁned on a mesh with 2 boundary patches and
illustrates the explicit operations merely transform one ﬁeld to another and drawn in 2D
for simplicity.
geometricField<Type>
volField<Type>
surfaceField<Type>
pointField<Type>
geometricField<Type>
volField<Type>
surfaceField<Type>
pointField<Type>
fvMatrix<Type>
ﬁniteVolumeMethod (fvm)
(Implicit)
ﬁniteVolumeCalculus (fvc)
Other explicit operations
(Explict)
Figure 2.6: A geometricField<Type> and its operators
Table 2.2 lists the main functions that are available in fvm and fvc to discretise terms
that may be found in a PDE. FV discretisation of each term is formulated by ﬁrst inte-
grating the term over a cell volume V . Most spatial derivative terms are then converted
to integrals over the cell surface S bounding the volume using Gauss’s theorem
V
∇ ⋆ φ dV =
S
dS ⋆ φ (2.13)
where S is the surface area vector, φ can represent any tensor ﬁeld and the star notation
⋆ is used to represent any tensor product, i.e. inner, outer and cross and the respective
derivatives: divergence ∇ • φ, gradient ∇φ and ∇ × φ. Volume and surface integrals
are then linearised using appropriate schemes which are described for each term in the
following Sections. Some terms are always discretised using one scheme, a selection of
schemes is oﬀered in OpenFOAM for the discretisation of other terms. The choice of
scheme is either made by a direct speciﬁcation within the code or it can be read from an
input ﬁle at job run-time and stored within an fvSchemes class object.
Open∇FOAM-2.1.0
2.4 Equation discretisation P-37
Term description Implicit / Text fvm::/fvc:: functions
Explicit expression
Laplacian Imp/Exp ∇2
φ laplacian(phi)
∇ • Γ∇φ laplacian(Gamma, phi)
Time derivative Imp/Exp
∂φ
∂t
ddt(phi)
∂ρφ
∂t
ddt(rho,phi)
Second time derivative Imp/Exp
∂
∂t
ρ
∂φ
∂t
d2dt2(rho, phi)
Convection Imp/Exp ∇ • (ψ) div(psi,scheme)*
∇ • (ψφ) div(psi, phi, word)*
div(psi, phi)
Divergence Exp ∇ • χ div(chi)
Gradient Exp ∇χ grad(chi)
∇φ gGrad(phi)
lsGrad(phi)
snGrad(phi)
snGradCorrection(phi)
Grad-grad squared Exp |∇∇φ|2
sqrGradGrad(phi)
Curl Exp ∇ × φ curl(phi)
Source Imp ρφ Sp(rho,phi)
Imp/Exp† SuSp(rho,phi)
†fvm::SuSp source is discretised implicit or explicit depending on the sign of rho.
†An explicit source can be introduced simply as a vol<Type>Field, e.g.rho*phi.
Function arguments can be of the following classes:
phi: vol<Type>Field
Gamma: scalar volScalarField, surfaceScalarField, volTensorField, surfaceTensorField.
rho: scalar, volScalarField
psi: surfaceScalarField.
chi: surface<Type>Field, vol<Type>Field.
Table 2.2: Discretisation of PDE terms in OpenFOAM
Open∇FOAM-2.1.0
P-38 Discretisation procedures
2.4.1 The Laplacian term
The Laplacian term is integrated over a control volume and linearised as follows:
V
∇ • (Γ∇φ) dV =
S
dS • (Γ∇φ) =
f
Γf Sf • (∇φ)f (2.14)
The face gradient discretisation is implicit when the length vector d between the centre
of the cell of interest P and the centre of a neighbouring cell N is orthogonal to the face
plane, i.e. parallel to Sf :
Sf • (∇φ)f = |Sf |
φN − φP
|d|
(2.15)
In the case of non-orthogonal meshes, an additional explicit term is introduced which is
evaluated by interpolating cell centre gradients, themselves calculated by central diﬀer-
encing cell centre values.
2.4.2 The convection term
The convection term is integrated over a control volume and linearised as follows:
V
∇ • (ρUφ) dV =
S
dS • (ρUφ) =
f
Sf • (ρU)f φf =
f
Fφf (2.16)
The face ﬁeld φf can be evaluated using a variety of schemes:
Central diﬀerencing (CD) is second-order accurate but unbounded
φf = fxφP + (1 − fx)φN (2.17)
where fx ≡ fN/PN where fN is the distance between f and cell centre N and
PN is the distance between cell centres P and N.
Upwind diﬀerencing (UD) determines φf from the direction of ﬂow and is bounded
at the expense of accuracy
φf =
φP for F ≥ 0
φN for F < 0
(2.18)
Blended diﬀerencing (BD) schemes combine UD and CD in an attempt to preserve
boundedness with reasonable accuracy,
φf = (1 − γ) (φf )UD + γ (φf )CD (2.19)
OpenFOAM has several implementations of the Gamma diﬀerencing scheme to
select the blending coeﬃcient γ but it oﬀers other well-known schemes such as van
Leer, SUPERBEE, MINMOD etc..
Open∇FOAM-2.1.0
2.4 Equation discretisation P-39
2.4.3 First time derivative
The ﬁrst time derivative ∂/∂t is integrated over a control volume as follows:
∂
∂t V
ρφ dV (2.20)
The term is discretised by simple diﬀerencing in time using:
new values φn
≡ φ(t + ∆t) at the time step we are solving for;
old values φo
≡ φ(t) that were stored from the previous time step;
old-old values φoo
≡ φ(t − ∆t) stored from a time step previous to the last.
One of two discretisation schemes can be declared using the timeScheme keyword in the
appropriate input ﬁle, described in detail in section 4.4 of the User Guide.
Euler implicit scheme, timeScheme EulerImplicit, that is ﬁrst order accurate in time:
∂
∂t V
ρφ dV =
(ρP φP V )n
− (ρP φP V )o
∆t
(2.21)
Backward diﬀerencing scheme, timeScheme BackwardDifferencing, that is second
order accurate in time by storing the old-old values and therefore with a larger
overhead in data storage than EulerImplicit:
∂
∂t V
ρφ dV =
3 (ρP φP V )n
− 4 (ρP φP V )o
+ (ρP φP V )oo
2∆t
(2.22)
2.4.4 Second time derivative
The second time derivative is integrated over a control volume and linearised as follows:
∂
∂t V
ρ
∂φ
∂t
dV =
(ρP φP V )n
− 2 (ρP φP V )o
+ (ρP φP V )oo
∆t2
(2.23)
It is ﬁrst order accurate in time.
2.4.5 Divergence
The divergence term described in this Section is strictly an explicit term that is distin-
guished from the convection term of Section 2.4.2, i.e. in that it is not the divergence of
the product of a velocity and dependent variable. The term is integrated over a control
volume and linearised as follows:
V
∇ • φ dV =
S
dS • φ =
f
Sf • φf (2.24)
The fvc::div function can take as its argument either a surface<Type>Field, in which
case φf is speciﬁed directly, or a vol<Type>Field which is interpolated to the face by
central diﬀerencing as described in Section 2.4.10:
Open∇FOAM-2.1.0
P-40 Discretisation procedures
2.4.6 Gradient
The gradient term is an explicit term that can be evaluated in a variety of ways. The
scheme can be evaluated either by selecting the particular grad function relevant to the
discretisation scheme, e.g.fvc::gGrad, fvc::lsGrad etc., or by using the fvc::grad
function combined with the appropriate timeScheme keyword in an input ﬁle
Gauss integration is invoked using the fvc::grad function with timeScheme Gauss
or directly using the fvc::gGrad function. The discretisation is performed using
the standard method of applying Gauss’s theorem to the volume integral:
V
∇φ dV =
S
dS φ =
f
Sf φf (2.25)
As with the fvc::div function, the Gaussian integration fvc::grad function can
take either a surfaceField<Type> or a volField<Type> as an argument.
Least squares method is based on the following idea:
1. a value at point P can be extrapolated to neighbouring point N using the
gradient at P;
2. the extrapolated value at N can be compared to the actual value at N, the
diﬀerence being the error;
3. if we now minimise the sum of the square of weighted errors at all neighbours
of P with the respect to the gradient, then the gradient should be a good
approximation.
Least squares is invoked using the fvc::grad function with timeScheme leastSquares
or directly using the fvc::lsGrad function. The discretisation is performed as by
ﬁrst calculating the tensor G at every point P by summing over neighbours N:
G =
N
w2
N dd (2.26)
where d is the vector from P to N and the weighting function wN = 1/|d|. The
gradient is then evaluated as:
(∇φ)P =
N
w2
N G−1 • d (φN − φP ) (2.27)
Surface normal gradient The gradient normal to a surface nf • (∇φ)f can be evalu-
ated at cell faces using the scheme
(∇φ)f =
φN − φP
|d|
(2.28)
This gradient is called by the function fvc::snGrad and returns a surfaceField<Type>.
The scheme is directly analogous to that evaluated for the Laplacian discretisation
scheme in Section 2.4.1, and in the same manner, a correction can be introduced
to improve the accuracy of this face gradient in the case of non-orthogonal meshes.
This correction is called using the function fvc::snGradCorrection [Check**].
Open∇FOAM-2.1.0
2.4 Equation discretisation P-41
2.4.7 Grad-grad squared
The grad-grad squared term is evaluated by: taking the gradient of the ﬁeld; taking the
gradient of the resulting gradient ﬁeld; and then calculating the magnitude squared of
the result. The mathematical expression for grad-grad squared of φ is |∇ (∇φ)|2
.
2.4.8 Curl
The curl is evaluated from the gradient term described in Section 2.4.6. First, the gradient
is discretised and then the curl is evaluated using the relationship from Equation 2.7,
repeated here for convenience
∇ × φ = 2 ∗(skew ∇φ)
2.4.9 Source terms
Source terms can be speciﬁed in 3 ways
Explicit Every explicit term is a volField<Type>. Hence, an explicit source term can be
incorporated into an equation simply as a ﬁeld of values. For example if we wished
to solve Poisson’s equation ∇2
φ = f, we would deﬁne phi and f as volScalarField
and then do
solve(fvm::laplacian(phi) == f)
Implicit An implicit source term is integrated over a control volume and linearised by
V
ρφ dV = ρP VP φP (2.29)
Implicit/Explicit The implicit source term changes the coeﬃcient of the diagonal of
the matrix. Depending on the sign of the coeﬃcient and matrix terms, this will
either increase or decrease diagonal dominance of the matrix. Decreasing the di-
agonal dominance could cause instability during iterative solution of the matrix
equation. Therefore OpenFOAM provides a mixed source discretisation procedure
that is implicit when the coeﬃcients that are greater than zero, and explicit for the
coeﬃcients less than zero. In mathematical terms the matrix coeﬃcient for node P
is VP max(ρP , 0) and the source term is VP φP min(ρP , 0).
2.4.10 Other explicit discretisation schemes
There are some other discretisation procedures that convert volField<Type>s into sur-
face<Type>Fields and visa versa.
Surface integral fvc::surfaceIntegrate performs a summation of surface<Type>Field
face values bounding each cell and dividing by the cell volume, i.e. ( f φf )/VP . It
returns a volField<Type>.
Surface sum fvc::surfaceSum performs a summation of surface<Type>Field face val-
ues bounding each cell, i.e. f φf returning a volField<Type>.
Average fvc::average produces an area weighted average of surface<Type>Field face
values, i.e. ( f Sf φf )/ f Sf , and returns a volField<Type>.
Open∇FOAM-2.1.0
P-42 Discretisation procedures
Reconstruct
Face interpolate The geometric<Type>Field function faceInterpolate() interpolates
volField<Type> cell centre values to cell faces using central diﬀerencing, returning a
surface<Type>Field.
2.5 Temporal discretisation
Although we have described the discretisation of temporal derivatives in Sections 2.4.3
and 2.4.4, we need to consider how to treat the spatial derivatives in a transient problem.
If we denote all the spatial terms as Aφ where A is any spatial operator, e.g. Laplacian,
then we can express a transient PDE in integral form as
t+∆t
t
∂
∂t V
ρφ dV +
V
Aφ dV dt = 0 (2.30)
Using the Euler implicit method of Equation 2.21, the ﬁrst term can be expressed as
t+∆t
t
∂
∂t V
ρφ dV dt =
t+∆t
t
(ρP φP V )n
− (ρP φP V )o
∆t
dt
=
(ρP φP V )n
− (ρP φP V )o
∆t
∆t
(2.31)
The second term can be expressed as
t+∆t
t V
Aφ dV dt =
t+∆t
t
A∗
φ dt (2.32)
where A∗
represents the spatial discretisation of A. The time integral can be discretised
in three ways:
Euler implicit uses implicit discretisation of the spatial terms, thereby taking current
values φn
.
t+∆t
t
A∗
φ dt = A∗
φn
∆t (2.33)
It is ﬁrst order accurate in time, guarantees boundedness and is unconditionally
stable.
Explicit uses explicit discretisation of the spatial terms, thereby taking old values φo
.
t+∆t
t
A∗
φ dt = A∗
φo
∆t (2.34)
It is ﬁrst order accurate in time and is unstable if the Courant number Co is greater
than 1. The Courant number is deﬁned as
Co =
Uf • d
|d|2∆t
(2.35)
where Uf is a characteristic velocity, e.g. velocity of a wave front, velocity of ﬂow.
Crank Nicholson uses the trapezoid rule to discretise the spatial terms, thereby taking
a mean of current values φn
and old values φo
.
t+∆t
t
A∗
φ dt = A∗ φn
+ φo
2
∆t (2.36)
It is second order accurate in time, is unconditionally stable but does not guarantee
boundedness.
Open∇FOAM-2.1.0
2.6 Boundary Conditions P-43
2.5.1 Treatment of temporal discretisation in OpenFOAM
At present the treatment of the temporal discretisation is controlled by the implementa-
tion of the spatial derivatives in the PDE we wish to solve. For example, let us say we
wish to solve a transient diﬀusion equation
∂φ
∂t
= κ∇2
φ (2.37)
An Euler implicit implementation of this would read
solve(fvm::ddt(phi) == kappa*fvm::laplacian(phi))
where we use the fvm class to discretise the Laplacian term implicitly. An explicit
implementation would read
solve(fvm::ddt(phi) == kappa*fvc::laplacian(phi))
where we now use the fvc class to discretise the Laplacian term explicitly. The Crank
Nicholson scheme can be implemented by the mean of implicit and explicit terms:
solve
(
fvm::ddt(phi)
==
kappa*0.5*(fvm::laplacian(phi) + fvc::laplacian(phi))
)
2.6 Boundary Conditions
Boundary conditions are required to complete the problem we wish to solve. We therefore
need to specify boundary conditions on all our boundary faces. Boundary conditions can
be divided into 2 types:
Dirichlet prescribes the value of the dependent variable on the boundary and is therefore
termed ‘ﬁxed value’ in this guide;
Neumann prescribes the gradient of the variable normal to the boundary and is therefore
termed ‘ﬁxed gradient’ in this guide.
When we perform discretisation of terms that include the sum over faces f , we need
to consider what happens when one of the faces is a boundary face.
Fixed value We specify a ﬁxed value at the boundary φb
• We can simply substitute φb in cases where the discretisation requires the value
on a boundary face φf , e.g. in the convection term in Equation 2.16.
• In terms where the face gradient (∇φ)f is required, e.g. Laplacian, it is calcu-
lated using the boundary face value and cell centre value,
Sf • (∇φ)f = |Sf |
φb − φP
|d|
(2.38)
Open∇FOAM-2.1.0
P-44 Discretisation procedures
Fixed gradient The ﬁxed gradient boundary condition gb is a speciﬁcation on inner
product of the gradient and unit normal to the boundary, or
gb =
S
|S|
• ∇φ
f
(2.39)
• When discretisation requires the value on a boundary face φf we must inter-
polate the cell centre value to the boundary by
φf = φP + d • (∇φ)f
= φP + |d| gb
(2.40)
• φb can be directly substituted in cases where the discretisation requires the
face gradient to be evaluated,
Sf • (∇φ)f = |Sf | gb (2.41)
2.6.1 Physical boundary conditions
The speciﬁcation of boundary conditions is usually an engineer’s interpretation of the
true behaviour. Real boundary conditions are generally deﬁned by some physical at-
tributes rather than the numerical description as described of the previous Section. In
incompressible ﬂuid ﬂow there are the following physical boundaries
Inlet The velocity ﬁeld at the inlet is supplied and, for consistency, the boundary con-
dition on pressure is zero gradient.
Outlet The pressure ﬁeld at the outlet is supplied and a zero gradient boundary condition
on velocity is speciﬁed.
No-slip impermeable wall The velocity of the ﬂuid is equal to that of the wall itself,
i.e. a ﬁxed value condition can be speciﬁed. The pressure is speciﬁed zero gradient
since the ﬂux through the wall is zero.
In a problem whose solution domain and boundary conditions are symmetric about a
plane, we only need to model half the domain to one side of the symmetry plane. The
boundary condition on the plane must be speciﬁed according to
Symmetry plane The symmetry plane condition speciﬁes the component of the gradi-
ent normal to the plane should be zero. [Check**]
Open∇FOAM-2.1.0
Chapter 3
Examples of the use of OpenFOAM
In this section we shall describe several test cases supplied with the OpenFOAM distri-
bution. The intention is to provide example cases, including those in the tutorials in
chapter 2 of the User Guide, for every standard solver. The examples are designed to
introduce certain tools and features of OpenFOAM, e.g. within pre-/post-processing, nu-
merical schemes, algorithms. They also provide a means for validation of solvers although
that is not their principal function.
Each example contains a description of the problem: the geometry, initial and bound-
ary conditions, a brief description of the equations being solved, models used, and physical
properties required. The solution domain is selected which may be a portion of the orig-
inal geometry, e.g. if we introduce symmetry planes. The method of meshing, usually
blockMesh, is speciﬁed; of course the user can simply view the mesh since every exam-
ple is distributed with the polyMesh directory containing the data ﬁles that describe the
mesh.
The examples coexist with the tutorials in the tutorials subdirectory of the OpenFOAM
installation. They are organised into a set of subdirectories by solver, e.g. all the icoFoam
cases are stored within a subdirectory icoFoam. Before running a particular example,
the user is urged to copy it into their user account. We recommend that the user stores
all OpenFOAM cases in a directory we recommend that the tutorials are copied into a
directory $FOAM RUN. If this directory structure has not yet been created in the user’s
account, it can be created with
mkdir -p $FOAM RUN
The tutorials can then be copied into this directory with
cp -r $FOAM TUTORIALS/* $FOAM RUN
3.1 Flow around a cylinder
In this example we shall investigate potential ﬂow around a cylinder using potentialFoam.
This example introduces the following OpenFOAM features:
• non-orthogonal meshes;
• generating an analytical solution to a problem in OpenFOAM.
P-46 Examples of the use of OpenFOAM
3.1.1 Problem speciﬁcation
The problem is deﬁned as follows:
Solution domain The domain is 2 dimensional and consists of a square domain with
a cylinder collocated with the centre of the square as shown in Figure 3.1.
Ux = 1.0 m/s p = 0 bar
symmetry
0.5 m
4.0 m
4.0 m
x
y
0
Figure 3.1: Geometry of ﬂow round a cylinder
Governing equations
• Mass continuity for an incompressible ﬂuid
∇ • U = 0 (3.1)
• Pressure equation for an incompressible, irrotational ﬂuid assuming steady-
state conditions
∇2
p = 0 (3.2)
Boundary conditions
• Inlet (left) with ﬁxed velocity U = (1, 0, 0) m/s.
• Outlet (right) with a ﬁxed pressure p = 0 Pa.
• No-slip wall (bottom);
• Symmetry plane (top).
Initial conditions U = 0 m/s, p = 0 Pa — required in OpenFOAM input ﬁles but not
necessary for the solution since the problem is steady-state.
Solver name potentialFoam: a potential ﬂow code, i.e. assumes the ﬂow is incompress-
ible, steady, irrotational, inviscid and it ignores gravity.
Case name cylinder case located in the $FOAM TUTORIALS/potentialFoam directory.
Open∇FOAM-2.1.0
3.1 Flow around a cylinder P-47
3.1.2 Note on potentialFoam
potentialFoam is a useful solver to validate OpenFOAM since the assumptions of potential
ﬂow are such that an analytical solution exists for cases whose geometries are relatively
simple. In this example of ﬂow around a cylinder an analytical solution exists with which
we can compare our numerical solution. potentialFoam can also be run more like a utility
to provide a (reasonably) conservative initial U ﬁeld for a problem. When running certain
cases, this can useful for avoiding instabilities due to the initial ﬁeld being unstable.
In short, potentialFoam creates a conservative ﬁeld from a non-conservative initial ﬁeld
supplied by the user.
3.1.3 Mesh generation
Mesh generation using blockMesh has been described in tutorials in the User Guide. In
this case, the mesh consists of 10 blocks as shown in Figure 3.2. Remember that all
10
5
4
9
10
3
81817
16
1514
111213 2
7 6
2
3
0
1
4
5
6
7
8
9
y
x
down down
left right
cylinder
up
Figure 3.2: Blocks in cylinder geometry
meshes are treated as 3 dimensional in OpenFOAM. If we wish to solve a 2 dimensional
problem, we must describe a 3 dimensional mesh that is only one cell thick in the third
direction that is not solved. In Figure 3.2 we show only the back plane of the geometry,
along z = −0.5, in which the vertex numbers are numbered 0-18. The other 19 vertices
in the front plane, z = +0.5, are numbered in the same order as the back plane, as shown
in the mesh description ﬁle below:
1 /*--------------------------------*- C++ -*----------------------------------*\
2 | ========= | |
3 | \\ / F ield | OpenFOAM: The Open Source CFD Toolbox |
4 | \\ / O peration | Version: 2.1.0 |
5 | \\ / A nd | Web: www.OpenFOAM.org |
6 | \\/ M anipulation | |
7 \*---------------------------------------------------------------------------*/
8 FoamFile
9 {
10 version 2.0;
11 format ascii;
12 class dictionary;
13 object blockMeshDict;
14 }
15 // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
16
17 convertToMeters 1;
Open∇FOAM-2.1.0
P-48 Examples of the use of OpenFOAM
18
19 vertices #codeStream
20 {
21 codeInclude
22 #{
23 #include "pointField.H"
24 #};
25
26 code
27 #{
28 pointField points(19);
29 points[0] = point(0.5, 0, -0.5);
30 points[1] = point(1, 0, -0.5);
31 points[2] = point(2, 0, -0.5);
32 points[3] = point(2, 0.707107, -0.5);
33 points[4] = point(0.707107, 0.707107, -0.5);
34 points[5] = point(0.353553, 0.353553, -0.5);
35 points[6] = point(2, 2, -0.5);
36 points[7] = point(0.707107, 2, -0.5);
37 points[8] = point(0, 2, -0.5);
38 points[9] = point(0, 1, -0.5);
39 points[10] = point(0, 0.5, -0.5);
40 points[11] = point(-0.5, 0, -0.5);
41 points[12] = point(-1, 0, -0.5);
42 points[13] = point(-2, 0, -0.5);
43 points[14] = point(-2, 0.707107, -0.5);
44 points[15] = point(-0.707107, 0.707107, -0.5);
45 points[16] = point(-0.353553, 0.353553, -0.5);
46 points[17] = point(-2, 2, -0.5);
47 points[18] = point(-0.707107, 2, -0.5);
48
49 // Duplicate z points
50 label sz = points.size();
51 points.setSize(2*sz);
52 for (label i = 0; i < sz; i++)
53 {
54 const point& pt = points[i];
55 points[i+sz] = point(pt.x(), pt.y(), -pt.z());
56 }
57
58 os << points;
59 #};
60 };
61
62
63 blocks
64 (
65 hex (5 4 9 10 24 23 28 29) (10 10 1) simpleGrading (1 1 1)
66 hex (0 1 4 5 19 20 23 24) (10 10 1) simpleGrading (1 1 1)
67 hex (1 2 3 4 20 21 22 23) (20 10 1) simpleGrading (1 1 1)
68 hex (4 3 6 7 23 22 25 26) (20 20 1) simpleGrading (1 1 1)
69 hex (9 4 7 8 28 23 26 27) (10 20 1) simpleGrading (1 1 1)
70 hex (15 16 10 9 34 35 29 28) (10 10 1) simpleGrading (1 1 1)
71 hex (12 11 16 15 31 30 35 34) (10 10 1) simpleGrading (1 1 1)
72 hex (13 12 15 14 32 31 34 33) (20 10 1) simpleGrading (1 1 1)
73 hex (14 15 18 17 33 34 37 36) (20 20 1) simpleGrading (1 1 1)
74 hex (15 9 8 18 34 28 27 37) (10 20 1) simpleGrading (1 1 1)
75 );
76
77 edges
78 (
79 arc 0 5 (0.469846 0.17101 -0.5)
80 arc 5 10 (0.17101 0.469846 -0.5)
81 arc 1 4 (0.939693 0.34202 -0.5)
82 arc 4 9 (0.34202 0.939693 -0.5)
83 arc 19 24 (0.469846 0.17101 0.5)
84 arc 24 29 (0.17101 0.469846 0.5)
85 arc 20 23 (0.939693 0.34202 0.5)
86 arc 23 28 (0.34202 0.939693 0.5)
87 arc 11 16 (-0.469846 0.17101 -0.5)
88 arc 16 10 (-0.17101 0.469846 -0.5)
89 arc 12 15 (-0.939693 0.34202 -0.5)
90 arc 15 9 (-0.34202 0.939693 -0.5)
91 arc 30 35 (-0.469846 0.17101 0.5)
92 arc 35 29 (-0.17101 0.469846 0.5)
93 arc 31 34 (-0.939693 0.34202 0.5)
94 arc 34 28 (-0.34202 0.939693 0.5)
95 );
96
Open∇FOAM-2.1.0
3.1 Flow around a cylinder P-49
97 boundary
98 (
99 down
100 {
101 type symmetryPlane;
102 faces
103 (
104 (0 1 20 19)
105 (1 2 21 20)
106 (12 11 30 31)
107 (13 12 31 32)
108 );
109 }
110 right
111 {
112 type patch;
113 faces
114 (
115 (2 3 22 21)
116 (3 6 25 22)
117 );
118 }
119 up
120 {
121 type symmetryPlane;
122 faces
123 (
124 (7 8 27 26)
125 (6 7 26 25)
126 (8 18 37 27)
127 (18 17 36 37)
128 );
129 }
130 left
131 {
132 type patch;
133 faces
134 (
135 (14 13 32 33)
136 (17 14 33 36)
137 );
138 }
139 cylinder
140 {
141 type symmetryPlane;
142 faces
143 (
144 (10 5 24 29)
145 (5 0 19 24)
146 (16 10 29 35)
147 (11 16 35 30)
148 );
149 }
150 );
151
152 mergePatchPairs
153 (
154 );
155
156 // ************************************************************************* //
3.1.4 Boundary conditions and initial ﬁelds
Using FoamX or editing case ﬁles by hand, set the boundary conditions in accordance
with the problem description in Figure 3.1, i.e. the left boundary should be an Inlet,
the right boundary should be an Outlet and the down and cylinder boundaries should
be symmetryPlane. The top boundary conditions is chosen so that we can make the
most genuine comparison with our analytical solution which uses the assumption that
the domain is inﬁnite in the y direction. The result is that the normal gradient of U is
small along a plane coinciding with our boundary. We therefore impose the condition
that the normal component is zero, i.e. specify the boundary as a symmetryPlane, thereby
ensuring that the comparison with the analytical is reasonable.
Open∇FOAM-2.1.0
P-50 Examples of the use of OpenFOAM
3.1.5 Running the case
No ﬂuid properties need be speciﬁed in this problem since the ﬂow is assumed to be
incompressible and inviscid. In the system subdirectory, the controlDict speciﬁes the
control parameters for the run. Note that since we assume steady ﬂow, we only run for
1 time step:
1 /*--------------------------------*- C++ -*----------------------------------*\
2 | ========= | |
3 | \\ / F ield | OpenFOAM: The Open Source CFD Toolbox |
4 | \\ / O peration | Version: 2.1.0 |
5 | \\ / A nd | Web: www.OpenFOAM.org |
6 | \\/ M anipulation | |
7 \*---------------------------------------------------------------------------*/
8 FoamFile
9 {
10 version 2.0;
11 format ascii;
12 class dictionary;
13 location "system";
14 object controlDict;
15 }
16 // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
17
18 application potentialFoam;
19
20 startFrom startTime;
21
22 startTime 0;
23
24 stopAt endTime;
25
26 endTime 1;
27
28 deltaT 1;
29
30 writeControl timeStep;
31
32 writeInterval 1;
33
34 purgeWrite 0;
35
36 writeFormat ascii;
37
38 writePrecision 6;
39
40 writeCompression off;
41
42 timeFormat general;
43
44 timePrecision 6;
45
46 runTimeModifiable true;
47
48 functions
49 {
50 difference
51 {
52 // Load the library containing the 'coded' functionObject
53 functionObjectLibs ("libutilityFunctionObjects.so");
54 type coded;
55 // Name of on-the-fly generated functionObject
56 redirectType error;
57 code
58 #{
59 // Lookup U
60 Info<< "Looking up field U\n" << endl;
61 const volVectorField& U = mesh().lookupObject<volVectorField>("U");
62
63 Info<< "Reading inlet velocity uInfX\n" << endl;
64
65 scalar ULeft = 0.0;
66 label leftI = mesh().boundaryMesh().findPatchID("left");
67 const fvPatchVectorField& fvp = U.boundaryField()[leftI];
68 if (fvp.size())
69 {
70 ULeft = fvp[0].x();
71 }
72 reduce(ULeft, maxOp<scalar>());
73
74 dimensionedScalar uInfX
Open∇FOAM-2.1.0
3.1 Flow around a cylinder P-51
75 (
76 "uInfx",
77 dimensionSet(0, 1, -1, 0, 0),
78 ULeft
79 );
80
81 Info << "U at inlet = " << uInfX.value() << " m/s" << endl;
82
83
84 scalar magCylinder = 0.0;
85 label cylI = mesh().boundaryMesh().findPatchID("cylinder");
86 const fvPatchVectorField& cylFvp = mesh().C().boundaryField()[cylI];
87 if (cylFvp.size())
88 {
89 magCylinder = mag(cylFvp[0]);
90 }
91 reduce(magCylinder, maxOp<scalar>());
92
93 dimensionedScalar radius
94 (
95 "radius",
96 dimensionSet(0, 1, 0, 0, 0),
97 magCylinder
98 );
99
100 Info << "Cylinder radius = " << radius.value() << " m" << endl;
101
102 volVectorField UA
103 (
104 IOobject
105 (
106 "UA",
107 mesh().time().timeName(),
108 U.mesh(),
109 IOobject::NO_READ,
110 IOobject::AUTO_WRITE
111 ),
112 U
113 );
114
115 Info<< "\nEvaluating analytical solution" << endl;
116
117 const volVectorField& centres = UA.mesh().C();
118 volScalarField magCentres(mag(centres));
119 volScalarField theta(acos((centres & vector(1,0,0))/magCentres));
120
121 volVectorField cs2theta
122 (
123 cos(2*theta)*vector(1,0,0)
124 + sin(2*theta)*vector(0,1,0)
125 );
126
127 UA = uInfX*(dimensionedVector(vector(1,0,0))
128 - pow((radius/magCentres),2)*cs2theta);
129
130 // Force writing of UA (since time has not changed)
131 UA.write();
132
133 volScalarField error("error", mag(U-UA)/mag(UA));
134
135 Info<<"Writing relative error in U to " << error.objectPath()
136 << endl;
137
138 error.write();
139 #};
140 }
141 }
142
143
144 // ************************************************************************* //
potentialFoam executes an iterative loop around the pressure equation which it solves in
order that explicit terms relating to non-orthogonal correction in the Laplacian term may
be updated in successive iterations. The number of iterations around the pressure equa-
tion is controlled by the nNonOrthogonalCorrectors keyword in controlDict. In the ﬁrst
instance we can set nNonOrthogonalCorrectors to 0 so that no loops are performed,
i.e. the pressure equation is solved once, and there is no non-orthogonal correction. The
solution is shown in Figure 3.3(a) (at t = 1, when the steady-state simulation is com-
plete). We expect the solution to show smooth streamlines passing across the domain
Open∇FOAM-2.1.0
P-52 Examples of the use of OpenFOAM
(a) With no non-orthogonal correction
(b) With non-orthogonal correction
(c) Analytical solution
Figure 3.3: Streamlines of potential ﬂow
Open∇FOAM-2.1.0
3.2 Steady turbulent ﬂow over a backward-facing step P-53
as in the analytical solution in Figure 3.3(c), yet there is clearly some error in the re-
gions where there is high non-orthogonality in the mesh, e.g. at the join of blocks 0, 1
and 3. The case can be run a second time with some non-orthogonal correction by set-
ting nNonOrthogonalCorrectors to 3. The solution shows smooth streamlines with no
signiﬁcant error due to non-orthogonality as shown in Figure 3.3(b).
3.2 Steady turbulent ﬂow over a backward-facing step
In this example we shall investigate steady turbulent ﬂow over a backward-facing step.
The problem description is taken from one used by Pitz and Daily in an experimental
investigation [**] against which the computed solution can be compared. This example
introduces the following OpenFOAM features for the ﬁrst time:
• generation of a mesh using blockMesh using full mesh grading capability;
• steady turbulent ﬂow.
3.2.1 Problem speciﬁcation
The problem is deﬁned as follows:
Solution domain The domain is 2 dimensional, consisting of a short inlet, a backward-
facing step and converging nozzle at outlet as shown in Figure 3.4.
84.020.6 206.0
Inlet: Ux = 10.0 m/s Outlet: p = 0 Pa
50.8 33.2
y
x
Dimensions in mm
Figure 3.4: Geometry of backward-facing step
Governing equations
• Mass continuity for incompressible ﬂow
∇ • U = 0 (3.3)
• Steady ﬂow momentum equation
∇ • (UU) + ∇ • R = −∇p (3.4)
where p is kinematic pressure and (in slightly over-simplistic terms) R =
νeff ∇U is the viscous stress term with an eﬀective kinematic viscosity νeff ,
calculated from selected transport and turbulence models.
Open∇FOAM-2.1.0
P-54 Examples of the use of OpenFOAM
Initial conditions U = 0 m/s, p = 0 Pa — required in OpenFOAM input ﬁles but not
necessary for the solution since the problem is steady-state.
Boundary conditions
• Inlet (left) with ﬁxed velocity U = (10, 0, 0) m/s;
• Outlet (right) with ﬁxed pressure p = 0 Pa;
• No-slip walls on other boundaries.
Transport properties
• Kinematic viscosity of air ν = µ/ρ = 18.1 × 10−6
/1.293 = 14.0 µm2
/s
Turbulence model
• Standard k − ǫ;
• Coeﬃcients: Cµ = 0.09; C1 = 1.44; C2 = 1.92; αk = 1; αǫ = 0.76923.
Solver name simpleFoam: an implementation for steady incompressible ﬂow.
Case name pitzDaily, located in the $FOAM TUTORIALS/simpleFoam directory.
The problem is solved using simpleFoam, so-called as it is an implementation for steady
ﬂow using the SIMPLE algorithm [**]. The solver has full access to all the turbulence
models in the incompressibleTurbulenceModels library and the non-Newtonian models in-
compressibleTransportModels library of the standard OpenFOAM release.
3.2.2 Mesh generation
We expect that the ﬂow in this problem is reasonably complex and an optimum solution
will require grading of the mesh. In general, the regions of highest shear are particularly
critical, requiring a ﬁner mesh than in the regions of low shear. We can anticipate
where high shear will occur by considering what the solution might be in advance of any
calculation. At the inlet we have strong uniform ﬂow in the x direction and, as it passes
over the step, it generates shear on the ﬂuid below, generating a vortex in the bottom
half of the domain. The regions of high shear will therefore be close to the centreline of
the domain and close to the walls.
The domain is subdivided into 12 blocks as shown in Figure 3.5.
The mesh is 3 dimensional, as always in OpenFOAM, so in Figure 3.5 we are viewing
the back plane along z = −0.5. The full set of vertices and blocks are given in the mesh
description ﬁle below:
1 /*--------------------------------*- C++ -*----------------------------------*\
2 | ========= | |
3 | \\ / F ield | OpenFOAM: The Open Source CFD Toolbox |
4 | \\ / O peration | Version: 2.1.0 |
5 | \\ / A nd | Web: www.OpenFOAM.org |
6 | \\/ M anipulation | |
7 \*---------------------------------------------------------------------------*/
8 FoamFile
9 {
10 version 2.0;
11 format ascii;
12 class dictionary;
13 object blockMeshDict;
14 }
15 // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
16
17 convertToMeters 0.001;
18
Open∇FOAM-2.1.0
3.2 Steady turbulent ﬂow over a backward-facing step P-55
1
14
13
12
11
3
7
8
2
1
5
4 10
2
3
4
6
7
8
9
11
0 5
10
16
17
19
20
21
18
9 15
12
upperWall
outlet
0 6
inlet
lowerWall
Figure 3.5: Blocks in backward-facing step
19 vertices
20 (
21 (-20.6 0 -0.5)
22 (-20.6 3 -0.5)
23 (-20.6 12.7 -0.5)
24 (-20.6 25.4 -0.5)
25 (0 -25.4 -0.5)
26 (0 -5 -0.5)
27 (0 0 -0.5)
28 (0 3 -0.5)
29 (0 12.7 -0.5)
30 (0 25.4 -0.5)
31 (206 -25.4 -0.5)
32 (206 -8.5 -0.5)
33 (206 0 -0.5)
34 (206 6.5 -0.5)
35 (206 17 -0.5)
36 (206 25.4 -0.5)
37 (290 -16.6 -0.5)
38 (290 -6.3 -0.5)
39 (290 0 -0.5)
40 (290 4.5 -0.5)
41 (290 11 -0.5)
42 (290 16.6 -0.5)
43 (-20.6 0 0.5)
44 (-20.6 3 0.5)
45 (-20.6 12.7 0.5)
46 (-20.6 25.4 0.5)
47 (0 -25.4 0.5)
48 (0 -5 0.5)
49 (0 0 0.5)
50 (0 3 0.5)
51 (0 12.7 0.5)
52 (0 25.4 0.5)
53 (206 -25.4 0.5)
54 (206 -8.5 0.5)
55 (206 0 0.5)
56 (206 6.5 0.5)
57 (206 17 0.5)
58 (206 25.4 0.5)
59 (290 -16.6 0.5)
60 (290 -6.3 0.5)
61 (290 0 0.5)
62 (290 4.5 0.5)
63 (290 11 0.5)
64 (290 16.6 0.5)
65 );
66
67 blocks
68 (
69 hex (0 6 7 1 22 28 29 23) (18 7 1) simpleGrading (0.5 1.8 1)
70 hex (1 7 8 2 23 29 30 24) (18 10 1) simpleGrading (0.5 4 1)
71 hex (2 8 9 3 24 30 31 25) (18 13 1) simpleGrading (0.5 0.25 1)
72 hex (4 10 11 5 26 32 33 27) (180 18 1) simpleGrading (4 1 1)
73 hex (5 11 12 6 27 33 34 28) (180 9 1) edgeGrading (4 4 4 4 0.5 1 1 0.5 1 1 1 1)
74 hex (6 12 13 7 28 34 35 29) (180 7 1) edgeGrading (4 4 4 4 1.8 1 1 1.8 1 1 1 1)
75 hex (7 13 14 8 29 35 36 30) (180 10 1) edgeGrading (4 4 4 4 4 1 1 4 1 1 1 1)
76 hex (8 14 15 9 30 36 37 31) (180 13 1) simpleGrading (4 0.25 1)
77 hex (10 16 17 11 32 38 39 33) (25 18 1) simpleGrading (2.5 1 1)
Open∇FOAM-2.1.0
P-56 Examples of the use of OpenFOAM
78 hex (11 17 18 12 33 39 40 34) (25 9 1) simpleGrading (2.5 1 1)
79 hex (12 18 19 13 34 40 41 35) (25 7 1) simpleGrading (2.5 1 1)
80 hex (13 19 20 14 35 41 42 36) (25 10 1) simpleGrading (2.5 1 1)
81 hex (14 20 21 15 36 42 43 37) (25 13 1) simpleGrading (2.5 0.25 1)
82 );
83
84 edges
85 (
86 );
87
88 boundary
89 (
90 inlet
91 {
92 type patch;
93 faces
94 (
95 (0 22 23 1)
96 (1 23 24 2)
97 (2 24 25 3)
98 );
99 }
100 outlet
101 {
102 type patch;
103 faces
104 (
105 (16 17 39 38)
106 (17 18 40 39)
107 (18 19 41 40)
108 (19 20 42 41)
109 (20 21 43 42)
110 );
111 }
112 upperWall
113 {
114 type wall;
115 faces
116 (
117 (3 25 31 9)
118 (9 31 37 15)
119 (15 37 43 21)
120 );
121 }
122 lowerWall
123 {
124 type wall;
125 faces
126 (
127 (0 6 28 22)
128 (6 5 27 28)
129 (5 4 26 27)
130 (4 10 32 26)
131 (10 16 38 32)
132 );
133 }
134 frontAndBack
135 {
136 type empty;
137 faces
138 (
139 (22 28 29 23)
140 (23 29 30 24)
141 (24 30 31 25)
142 (26 32 33 27)
143 (27 33 34 28)
144 (28 34 35 29)
145 (29 35 36 30)
146 (30 36 37 31)
147 (32 38 39 33)
148 (33 39 40 34)
149 (34 40 41 35)
150 (35 41 42 36)
151 (36 42 43 37)
152 (0 1 7 6)
153 (1 2 8 7)
154 (2 3 9 8)
155 (4 5 11 10)
156 (5 6 12 11)
157 (6 7 13 12)
158 (7 8 14 13)
159 (8 9 15 14)
160 (10 11 17 16)
161 (11 12 18 17)
162 (12 13 19 18)
Open∇FOAM-2.1.0
3.2 Steady turbulent ﬂow over a backward-facing step P-57
163 (13 14 20 19)
164 (14 15 21 20)
165 );
166 }
167 );
168
169 mergePatchPairs
170 (
171 );
172
173 // ************************************************************************* //
A major feature of this problem is the use of the full mesh grading capability of
blockMesh that is described in section 5.3.1 of the User Guide. The user can see that
blocks 4,5 and 6 use the full list of 12 expansion ratios. The expansion ratios correspond
to each edge of the block, the ﬁrst 4 to the edges aligned in the local x1 direction, the
second 4 to the edges in the local x2 direction and the last 4 to the edges in the local x3
direction. In blocks 4, 5, and 6, the ratios are equal for all edges in the local x1 and x3
directions but not for the edges in the x2 direction that corresponds in all blocks to the
global y. If we consider the ratios used in relation to the block deﬁnition in section 5.3.1
of the User Guide, we realize that diﬀerent gradings have been prescribed along the left
and right edges in blocks 4,5 and 6 in Figure 3.5. The purpose of this diﬀerential grading
is to generate a ﬁne mesh close to the most critical region of ﬂow, the corner of the step,
and allow it to expand into the rest of the domain.
The mesh can be generated using blockMesh from the command line or from within
FoamX and viewed as described in previous examples.
3.2.3 Boundary conditions and initial ﬁelds
The case ﬁles can be viewed, or edited from within FoamX or by hand. In this case, we
are required to set the initial and boundary ﬁelds for velocity U, pressure p, turbulent
kinetic energy k and dissipation rate ε. The boundary conditions can be speciﬁed by
setting the physical patch types in FoamX: the upper and lower walls are set to Wall, the
left patch to Inlet and the right patch to Outlet. These physical boundary conditions
require us to specify a ﬁxedValue at the inlet on U, k and ε. U is given in the problem
speciﬁcation, but the values of k and ǫ must be chosen by the user in a similar manner to
that described in section 2.1.8.1 of the User Guide. We assume that the inlet turbulence
is isotropic and estimate the ﬂuctuations to be 5% of U at the inlet. We have
U′
x = U′
y = U′
z =
5
100
10 = 0.5 m/s (3.5)
and
k =
3
2
(0.5)2
= 0.375 m2
/s2
(3.6)
If we estimate the turbulent length scale l to be 10% of the width of the inlet then
ε =
C0.75
µ k1.5
l
=
0.090.75
0.3751.5
0.1 × 25.4 × 10−3
= 14.855 m2
/s3
(3.7)
At the outlet we need only specify the pressure p = 0Pa.
3.2.4 Case control
The choices of fvSchemes are as follows: the timeScheme should be SteadyState; the
gradScheme and laplacianScheme should be set as default to Gauss; and, the divScheme
should be set to UD to ensure boundedness.
Open∇FOAM-2.1.0
P-58 Examples of the use of OpenFOAM
Special attention should be paid to the settings of fvTolerances. Although the top
level simpleFoam code contains only equations for p and U, the turbulent model solves
equations for k, ε and R, and tolerance settings are required for all 5 equations. A
solverTolerance of 10−5
and solverRelativeTolerance of 0.1 are acceptable for all
variables with the exception of p when 10−6
and 0.01 are recommended. Under-relaxation
of the solution is required since the problem is steady. A relaxationFactor of 0.7 is
acceptable for U, k, ε and R but 0.3 is required for p to avoid numerical instability.
Finally, in controlDict, the time step deltaT should be set to 1 since in steady state
cases such as this is eﬀectively an iteration counter. With beneﬁt of hindsight we know
that the solution requires 1000 iterations reach reasonable convergence, hence endTime is
set to 1000. Ensure that the writeFrequency is suﬃciently high, e.g. 50, that you will
not ﬁll the hard disk with data during run time.
3.2.5 Running the case and post-processing
(a) Velocity vectors after 50 iterations
(b) Velocity vectors at 1000 iterations
(c) Streamlines at 1000 iterations
Figure 3.6: Development of a vortex in the backward-facing step.
Run the case and post-process the results. After a few iterations, e.g. 50, a vortex
develops beneath the corner of the step that is the height of the step but narrow in the
x-direction as shown by the vector plot of velocities is shown Figure 3.6(a). Over several
iterations the vortex stretches in the x-direction from the step to the outlet until at 1000
iterations the system reaches a steady-state in which the vortex is fully developed as
shown in Figure 3.6(b-c).
3.3 Supersonic ﬂow over a forward-facing step
In this example we shall investigate supersonic ﬂow over a forward-facing step. The
problem description involves a ﬂow of Mach 3 at an inlet to a rectangular geometry with
a step near the inlet region that generates shock waves.
This example introduces the following OpenFOAM features for the ﬁrst time:
Open∇FOAM-2.1.0
3.3 Supersonic ﬂow over a forward-facing step P-59
• supersonic ﬂow;
3.3.1 Problem speciﬁcation
The problem is deﬁned as follows:
Solution domain The domain is 2 dimensional and consists of a short inlet section
followed by a forward-facing step of 20% the height of the section as shown in
Figure 3.7
y
0.2
Inlet: Ux = Mach 3, p = 1 N/m2
x
1.0
0.6 2.4
Dimensions in m
Figure 3.7: Geometry of the forward step geometry
Governing equations
• Mass continuity
∂ρ
∂t
+ ∇ • (ρU) = 0 (3.8)
• Ideal gas
p = ρRT (3.9)
• Momentum equation for Newtonian ﬂuid
∂ρU
∂t
+ ∇ • (ρUU) − ∇ • µ∇U = −∇p (3.10)
• Energy equation for ﬂuid (ignoring some viscous terms), e = CvT, with Fourier’s
Law q = −k∇T
∂ρe
∂t
+ ∇ • (ρUe) − ∇ •
k
Cv
∇e = p∇ • U (3.11)
Initial conditions U = 0 m/s, p = 1 Pa, T = 1 K.
Boundary conditions
• Inlet (left) with ﬁxedValue for velocity U = 3 m/s = Mach 3, pressure p = 1 Pa
and temperature T = 1 K;
• Outlet (right) with zeroGradient on U, p and T;
• No-slip adiabatic wall (bottom);
Open∇FOAM-2.1.0
P-60 Examples of the use of OpenFOAM
• Symmetry plane (top).
Transport properties
• Dynamic viscosity of air µ = 18.1µPa s
Thermodynamic properties
• Speciﬁc heat at constant volume Cv = 1.78571 J/kg K
• Gas constant R = 0.714286 J/kg K
• Conductivity k = 32.3 µW/m K
Case name forwardStep case located in the $FOAM TUTORIALS/sonicFoam directory.
Solver name sonicFoam: an implementation for compressible trans-sonic/supersonic
laminar gas ﬂow.
The case is designed such that the speed of sound of the gas c =
√
γRT = 1 m/s, the
consequence being that the velocities are directly equivalent to the Mach number, e.g.
the inlet velocity of 3 m/s is equivalent to Mach 3. This speed of sound calculation can
be veriﬁed using the relationship for a perfect gas, Cp − Cv = R, i.e. the ratio of speciﬁc
heats
γ = Cp/Cv =
R
Cv
+ 1 (3.12)
3.3.2 Mesh generation
The mesh used in this case is relatively simple, speciﬁed with uniform rectangular cells
of length 0.06 m in the x direction and 0.05 m in the y direction. The geometry can
simply be divided into 3 blocks, one below the top of the step, and two above the step,
one either side of the step front. The full set of vertices and blocks are given in the mesh
description ﬁle below:
1 /*--------------------------------*- C++ -*----------------------------------*\
2 | ========= | |
3 | \\ / F ield | OpenFOAM: The Open Source CFD Toolbox |
4 | \\ / O peration | Version: 2.1.0 |
5 | \\ / A nd | Web: www.OpenFOAM.org |
6 | \\/ M anipulation | |
7 \*---------------------------------------------------------------------------*/
8 FoamFile
9 {
10 version 2.0;
11 format ascii;
12 class dictionary;
13 object blockMeshDict;
14 }
15 // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
16
17 convertToMeters 1;
18
19 vertices
20 (
21 (0 0 -0.05)
22 (0.6 0 -0.05)
23 (0 0.2 -0.05)
24 (0.6 0.2 -0.05)
25 (3 0.2 -0.05)
26 (0 1 -0.05)
27 (0.6 1 -0.05)
28 (3 1 -0.05)
29 (0 0 0.05)
30 (0.6 0 0.05)
31 (0 0.2 0.05)
32 (0.6 0.2 0.05)
33 (3 0.2 0.05)
Open∇FOAM-2.1.0
3.3 Supersonic ﬂow over a forward-facing step P-61
34 (0 1 0.05)
35 (0.6 1 0.05)
36 (3 1 0.05)
37 );
38
39 blocks
40 (
41 hex (0 1 3 2 8 9 11 10) (25 10 1) simpleGrading (1 1 1)
42 hex (2 3 6 5 10 11 14 13) (25 40 1) simpleGrading (1 1 1)
43 hex (3 4 7 6 11 12 15 14) (100 40 1) simpleGrading (1 1 1)
44 );
45
46 edges
47 (
48 );
49
50 boundary
51 (
52 inlet
53 {
54 type patch;
55 faces
56 (
57 (0 8 10 2)
58 (2 10 13 5)
59 );
60 }
61 outlet
62 {
63 type patch;
64 faces
65 (
66 (4 7 15 12)
67 );
68 }
69 bottom
70 {
71 type symmetryPlane;
72 faces
73 (
74 (0 1 9 8)
75 );
76 }
77 top
78 {
79 type symmetryPlane;
80 faces
81 (
82 (5 13 14 6)
83 (6 14 15 7)
84 );
85 }
86 obstacle
87 {
88 type patch;
89 faces
90 (
91 (1 3 11 9)
92 (3 4 12 11)
93 );
94 }
95 );
96
97 mergePatchPairs
98 (
99 );
100
101 // ************************************************************************* //
3.3.3 Running the case
The case approaches a steady-state at some time after 5 s. The results for pressure at
10 s are shown in Figure 3.8. The results clearly show discontinuities in pressure, i.e.
shock waves, emanating from ahead of the base of the step.
3.3.4 Exercise
The user can examine the eﬀect on the solution of increasing the inlet velocity.
Open∇FOAM-2.1.0
P-62 Examples of the use of OpenFOAM
6
8
10
12
4
2
14
pressure
Shock fronts
Figure 3.8: Shock fronts in the forward step problem
3.4 Decompression of a tank internally pressurised
with water
In this example we shall investigate a problem of rapid opening of a pipe valve close to
a pressurised liquid-ﬁlled tank. The prominent feature of the result in such cases is the
propagation of pressure waves which must therefore be modelled as a compressible liquid.
This tutorial introduces the following OpenFOAM features for the ﬁrst time:
• Mesh reﬁnement
• Pressure waves in liquids
3.4.1 Problem speciﬁcation
Solution domain The domain is 2 dimensional and consists of a tank with a small
outﬂow pipe as shown in Figure 3.9
x
y
Outlet: p = 0 bar
24050
10
50
100
orientation of horizontal x-axis
Note:
Dimensions in mm
image is rotated through -90◦
from normal
Figure 3.9: Geometry of a tank with outﬂow pipe
Governing equations This problem requires a model for compressibility ψ in the ﬂuid
in order to be able to resolve waves propagating at a ﬁnite speed. A barotropic
relationship is used to relate density ρ and pressure p are related to ψ.
• Mass continuity
∂ρ
∂t
+ ∇ • (ρU) = 0 (3.13)
Open∇FOAM-2.1.0
3.4 Decompression of a tank internally pressurised with water P-63
• The barotropic relationship
∂ρ
∂p
=
ρ
K
= ψ (3.14)
where K is the bulk modulus
• Equation 3.14 is linearised as
ρ ≈ ρ0 + ψ (p − p0) (3.15)
where ρ0 and p0 are the reference density and pressure respectively such that
ρ(p0) = ρ0.
• Momentum equation for Newtonian ﬂuid
∂ρU
∂t
+ ∇ • (ρUU) − ∇ • µ∇U = −∇p (3.16)
Boundary conditions Using FoamX the following physical boundary conditions can
be set:
• outerWall is speciﬁed the wall condition;
• axis is speciﬁed as the symmetryPlane;
• nozzle is speciﬁed as a pressureOutlet where p = 0 bar.
• front and back boundaries are speciﬁed as empty.
Initial conditions U = 0 m/s, p = 100 bar.
Transport properties
• Dynamic viscosity of water µ = 1.0 mPa s
Thermodynamic properties
• Density of water ρ = 1000 kg/m3
• Reference pressure p0 = 1 bar
• Compressibility of water ψ = 4.54 × 10−7
s2
/m2
Solver name sonicLiquidFoam: a compressible sonic laminar liquid ﬂow code.
Case name decompressionTank case located in the $FOAM TUTORIALS/sonicLiquidFoam
directory.
3.4.2 Mesh Generation
The full geometry is modelled in this case; the set of vertices and blocks are given in the
mesh description ﬁle below:
1 /*--------------------------------*- C++ -*----------------------------------*\
2 | ========= | |
3 | \\ / F ield | OpenFOAM: The Open Source CFD Toolbox |
4 | \\ / O peration | Version: 2.1.0 |
5 | \\ / A nd | Web: www.OpenFOAM.org |
6 | \\/ M anipulation | |
7 \*---------------------------------------------------------------------------*/
8 FoamFile
9 {
10 version 2.0;
Open∇FOAM-2.1.0
P-64 Examples of the use of OpenFOAM
11 format ascii;
12 class dictionary;
13 object blockMeshDict;
14 }
15 // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
16
17 convertToMeters 0.1;
18
19 vertices
20 (
21 (0 0 -0.1)
22 (1 0 -0.1)
23 (0 0.5 -0.1)
24 (1 0.5 -0.1)
25 (1.5 0.5 -0.1)
26 (0 0.6 -0.1)
27 (1 0.6 -0.1)
28 (1.5 0.6 -0.1)
29 (0 3 -0.1)
30 (1 3 -0.1)
31 (0 0 0.1)
32 (1 0 0.1)
33 (0 0.5 0.1)
34 (1 0.5 0.1)
35 (1.5 0.5 0.1)
36 (0 0.6 0.1)
37 (1 0.6 0.1)
38 (1.5 0.6 0.1)
39 (0 3 0.1)
40 (1 3 0.1)
41 );
42
43 blocks
44 (
45 hex (0 1 3 2 10 11 13 12) (30 20 1) simpleGrading (1 1 1)
46 hex (2 3 6 5 12 13 16 15) (30 5 1) simpleGrading (1 1 1)
47 hex (3 4 7 6 13 14 17 16) (25 5 1) simpleGrading (1 1 1)
48 hex (5 6 9 8 15 16 19 18) (30 95 1) simpleGrading (1 1 1)
49 );
50
51 edges
52 (
53 );
54
55 boundary
56 (
57 outerWall
58 {
59 type wall;
60 faces
61 (
62 (0 1 11 10)
63 (1 3 13 11)
64 (3 4 14 13)
65 (7 6 16 17)
66 (6 9 19 16)
67 (9 8 18 19)
68 );
69 }
70 axis
71 {
72 type symmetryPlane;
73 faces
74 (
75 (0 10 12 2)
76 (2 12 15 5)
77 (5 15 18 8)
78 );
79 }
80 nozzle
81 {
82 type patch;
83 faces
84 (
85 (4 7 17 14)
86 );
87 }
88 back
89 {
90 type empty;
91 faces
92 (
93 (0 2 3 1)
94 (2 5 6 3)
95 (3 6 7 4)
Open∇FOAM-2.1.0
3.4 Decompression of a tank internally pressurised with water P-65
96 (5 8 9 6)
97 );
98 }
99 front
100 {
101 type empty;
102 faces
103 (
104 (10 11 13 12)
105 (12 13 16 15)
106 (13 14 17 16)
107 (15 16 19 18)
108 );
109 }
110 );
111
112 mergePatchPairs
113 (
114 );
115
116 // ************************************************************************* //
In order to improve the numerical accuracy, we shall use the reference level of 1 bar for
the pressure ﬁeld. Note that both the internal ﬁeld level and the boundary conditions are
oﬀset by the reference level.
3.4.3 Preparing the Run
Before we commence the setup of the calculation, we need to consider the characteristic
velocity of the phenomenon we are trying to capture. In the case under consideration,
the ﬂuid velocity will be very small, but the pressure wave will propagate with the speed
of sound in water. The speed of sound is calculated as:
c =
1
ψ
=
1
4.54 × 10−7
= 1483.2m/s. (3.17)
For the mesh described above, the characteristic mesh size is approximately 2 mm (note
the scaling factor of 0.1 in the blockMeshDict ﬁle). Using
Co =
U ∆t
∆x
(3.18)
a reasonable time step is around ∆t = 5 × 10−7
s, giving the Co number of 0.35, based on
the speed of sound. Also, note that the reported Co number by the code (associated with
the convective velocity) will be two orders of magnitude smaller. As we are interested in
the pressure wave propagation, we shall set the simulation time to 0.25 ms. For reference,
the controlDict ﬁle is quoted below.
1 /*--------------------------------*- C++ -*----------------------------------*\
2 | ========= | |
3 | \\ / F ield | OpenFOAM: The Open Source CFD Toolbox |
4 | \\ / O peration | Version: 2.1.0 |
5 | \\ / A nd | Web: www.OpenFOAM.org |
6 | \\/ M anipulation | |
7 \*---------------------------------------------------------------------------*/
8 FoamFile
9 {
10 version 2.0;
11 format ascii;
12 class dictionary;
13 location "system";
14 object controlDict;
15 }
16 // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
17
18 application sonicLiquidFoam;
19
20 startFrom startTime;
21
Open∇FOAM-2.1.0
P-66 Examples of the use of OpenFOAM
22 startTime 0;
23
24 stopAt endTime;
25
26 endTime 0.0001;
27
28 deltaT 5e-07;
29
30 writeControl timeStep;
31
32 writeInterval 20;
33
34 purgeWrite 0;
35
36 writeFormat ascii;
37
38 writePrecision 6;
39
40 writeCompression off;
41
42 timeFormat general;
43
44 timePrecision 6;
45
46 runTimeModifiable true;
47
48
49 // ************************************************************************* //
3.4.4 Running the case
0
10
20
30
40
50
60
70
80
90
100
(a) At t = 50 µs (b) At t = 100 µs (c) At t = 150 µs
Pressure, p
(bar)
Figure 3.10: Propagation of pressure waves
The user can run the case and view results in dxFoam. The liquid ﬂows out through
the nozzle causing a wave to move along the nozzle. As it reaches the inlet to the tank,
some of the wave is transmitted into the tank and some of it is reﬂected. While a wave
is reﬂected up and down the inlet pipe, the waves transmitted into the tank expand and
propagate through the tank. In Figure 3.10, the pressures are shown as contours so that
the wave fronts are more clearly deﬁned than if plotted as a normal isoline plot.
If the simulation is run for a long enough time for the reﬂected wave to return to
the pipe, we can see that negative absolute pressure is detected. The modelling permits
Open∇FOAM-2.1.0
3.5 Magnetohydrodynamic ﬂow of a liquid P-67
this and has some physical basis since liquids can support tension, i.e. negative pressures.
In reality, however, impurities or dissolved gases in liquids act as sites for cavitation,
or vapourisation/boiling, of the liquid due to the low pressure. Therefore in practical
situations, we generally do not observe pressures falling below the vapourisation pressure
of the liquid; not at least for longer than it takes for the cavitation process to occur.
3.4.5 Improving the solution by reﬁning the mesh
0
10
20
30
40
50
60
70
80
90
100
(a) At t = 50 µs (b) At t = 100 µs (c) At t = 150 µs
Pressure, p
(bar)
Figure 3.11: Propagation of pressure waves with reﬁned mesh
Looking at the evolution of the resulting pressure ﬁeld in time, we can clearly see the
propagation of the pressure wave into the tank and numerous reﬂections from the inside
walls. It is also obvious that the pressure wave is smeared over a number of cells. We shall
now reﬁne the mesh and reduce the time step to obtain a sharper front resolution. Simply
edit the blockMeshDict and increase the number of cells by a factor of 4 in the x and y
directions, i.e. block 0 becomes (120 80 1) from (30 20 1) and so on. Run blockMesh
on this ﬁle. In addition, in order to maintain a Courant number below 1, the time step
must be reduced accordingly to ∆t = 10−7
s. The second simulation gives considerably
better resolution of the pressure waves as shown in Figure 3.11.
3.5 Magnetohydrodynamic ﬂow of a liquid
In this example we shall investigate an ﬂow of an electrically-conducting liquid through
a magnetic ﬁeld. The problem is one belonging to the branch of ﬂuid dynamics known
as magnetohydrodynamics (MHD) that uses mhdFoam.
Open∇FOAM-2.1.0
P-68 Examples of the use of OpenFOAM
3.5.1 Problem speciﬁcation
The problem is known as the Hartmann problem, chosen as it contains an analytical
solution with which mhdFoam can be validated. It is deﬁned as follows:
Solution domain The domain is 2 dimensional and consists of ﬂow along two parallel
plates as shown in Fig. 3.12.
y
x
2
20
Outlet: p = 0 barInlet: Ux = 1 m/s
By = 20 T
Figure 3.12: Geometry of the Hartmann problem
Governing equations
• Mass continuity for incompressible ﬂuid
∇ • U = 0 (3.19)
• Momentum equation for incompressible ﬂuid
∂U
∂t
+∇ • (UU)+∇ • (2BΓBUB)+∇ • (νU)+∇ (ΓBUB •
• B) = −∇p (3.20)
where B is the magnetic ﬂux density, ΓBU = (2µρ)−1
.
• Maxwell’s equations
∇ × E = −
∂B
∂t
(3.21)
where E is the electric ﬁeld strength.
∇ • B = 0 (3.22)
∇ × H = J +
∂D
∂t
= J (3.23)
assuming ∂D/∂t ≪ J. Here, H is the magnetic ﬁeld strength, J is the current
density and D is the electric ﬂux density.
• Charge continuity
∇ • J = 0 (3.24)
• Constitutive law
B = µH (3.25)
• Ohm’s law
J = σ (E + U × B) (3.26)
Open∇FOAM-2.1.0
3.5 Magnetohydrodynamic ﬂow of a liquid P-69
• Combining Equation 3.21, Equation 3.23, Equation 3.26, and taking the curl
∂B
∂t
+ ∇ • (UB) − ∇ • (φBU) − ∇ • (ΓBB) = 0 (3.27)
Boundary conditions
• inlet is speciﬁed the inlet condition with ﬁxed velocity U = (1, 0, 0) m/s;
• outlet is speciﬁed as the outlet with with ﬁxed pressure p = 0 Pa;
• upperWall is speciﬁed as a wall where B = (0, 20, 0) T.
• lowerWall is speciﬁed as a wall where B = (0, 20, 0) T.
• front and back boundaries are speciﬁed as empty.
Initial conditions U = 0 m/s, p = 100 Pa, B = (0, 20, 0) T.
Transport properties
• Kinematic viscosity ν = 1 Pa s
• Density ρ = 1 kg m/s
• Electrical conductivity σ = 1 (Ω m)−1
• Permeability µ = 1 H/m
Solver name mhdFoam: an incompressible laminar magneto-hydrodynamics code.
Case name hartmann case located in the $FOAM TUTORIALS/mhdFoam directory.
3.5.2 Mesh generation
The geometry is simply modelled with 100 cells in the x-direction and 40 cells in the
y-direction; the set of vertices and blocks are given in the mesh description ﬁle below:
1 /*--------------------------------*- C++ -*----------------------------------*\
2 | ========= | |
3 | \\ / F ield | OpenFOAM: The Open Source CFD Toolbox |
4 | \\ / O peration | Version: 2.1.0 |
5 | \\ / A nd | Web: www.OpenFOAM.org |
6 | \\/ M anipulation | |
7 \*---------------------------------------------------------------------------*/
8 FoamFile
9 {
10 version 2.0;
11 format ascii;
12 class dictionary;
13 object blockMeshDict;
14 }
15 // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
16
17 convertToMeters 1;
18
19 vertices
20 (
21 (0 -1 0)
22 (20 -1 0)
23 (20 1 0)
24 (0 1 0)
25 (0 -1 0.1)
26 (20 -1 0.1)
27 (20 1 0.1)
28 (0 1 0.1)
29 );
30
31 blocks
32 (
33 hex (0 1 2 3 4 5 6 7) (100 40 1) simpleGrading (1 1 1)
34 );
Open∇FOAM-2.1.0
P-70 Examples of the use of OpenFOAM
35
36 edges
37 (
38 );
39
40 boundary
41 (
42 inlet
43 {
44 type patch;
45 faces
46 (
47 (0 4 7 3)
48 );
49 }
50 outlet
51 {
52 type patch;
53 faces
54 (
55 (2 6 5 1)
56 );
57 }
58 lowerWall
59 {
60 type patch;
61 faces
62 (
63 (1 5 4 0)
64 );
65 }
66 upperWall
67 {
68 type patch;
69 faces
70 (
71 (3 7 6 2)
72 );
73 }
74 frontAndBack
75 {
76 type empty;
77 faces
78 (
79 (0 3 2 1)
80 (4 5 6 7)
81 );
82 }
83 );
84
85 mergePatchPairs
86 (
87 );
88
89 // ************************************************************************* //
3.5.3 Running the case
The user can run the case and view results in dxFoam. It is also useful at this stage to run
the Ucomponents utility to convert the U vector ﬁeld into individual scalar components.
MHD ﬂow is governed by, amongst other things, the Hartmann number which is a measure
of the ratio of electromagnetic body force to viscous force
M = BL
σ
ρν
(3.28)
where L is the characteristic length scale. In this case with By = 20 T, M = 20 and
the electromagnetic body forces dominate the viscous forces. Consequently with the ﬂow
fairly steady at t = 2 s the velocity proﬁle is almost planar, viewed at a cross section
midway along the domain x = 10 m. The user can plot a graph of the proﬁle of Ux in
dxFoam. Now the user should reduce the magnetic ﬂux density B to 1 Tand re-run the
code and Ucomponents. In this case, M = 1 and the electromagnetic body forces no longer
dominate. The velocity proﬁle consequently takes on the parabolic form, characteristic
Open∇FOAM-2.1.0
3.5 Magnetohydrodynamic ﬂow of a liquid P-71
0.0 1.0
-1.0
0.0
+1.0
y (m)
0.5 1.5
By = 20 T
Ux (m/s)
By = 1 T
Figure 3.13: Velocity proﬁle in the Hartmann problem for By = 1 T and By = 20 T.
of Poiseuille ﬂow as shown in Figure 3.13. To validate the code the analytical solution
for the velocity proﬁle Ux is superimposed in Figure 3.13, given by:
Ux(y)
Ux(0)
=
cosh M − cosh M(y/L)
cosh M − 1
(3.29)
where the characteristic length L is half the width of the domain, i.e. 1 m.
Open∇FOAM-2.1.0
P-72 Examples of the use of OpenFOAM
Open∇FOAM-2.1.0
Index P-73
Index
Symbols Numbers A B C D E F G H I J K L M N O P Q R S T U V W X Z
Symbols
*
tensor member function, P-25
+
tensor member function, P-25
-
tensor member function, P-25
/
tensor member function, P-25
/*...*/
C++ syntax, U-78
//
C++ syntax, U-78
OpenFOAM ﬁle syntax, U-104
# include
C++ syntax, U-72, U-78
&
tensor member function, P-25
&&
tensor member function, P-25
^
tensor member function, P-25
<LESModel>Coeffs keyword, U-184
<RASModel>Coeffs keyword, U-183
<delta>Coeffs keyword, U-184
0.000000e+00 directory, U-104
1-dimensional mesh, U-130
1D mesh, U-130
2-dimensional mesh, U-130
2D mesh, U-130
Numbers
0 directory, U-104
A
access functions, P-23
addLayersControls keyword, U-146
adiabaticFlameT utility, U-96
adjointShapeOptimizationFoam solver, U-85
adjustableRunTime
keyword entry, U-62, U-111
adjustTimeStep keyword, U-62
agglomerator keyword, U-122
algorithms tools, U-96
alphaContactAngle
boundary condition, U-59
analytical solution, P-45
Animations window panel, U-168
anisotropicFilter model, U-101
Annotation window panel, U-26, U-167
ansysToFoam utility, U-90
APIfunctions model, U-100
applications, U-69
Apply button, U-164, U-168
applyBoundaryLayer utility, U-90
applyWallFunctionBoundaryConditions utility,
U-90
arbitrarily unstructured, P-31
arc
keyword entry, U-139
arc keyword, U-138
As keyword, U-182
ascii
keyword entry, U-112
attachMesh utility, U-91
Auto Accept button, U-168
autoMesh
library, U-97
autoPatch utility, U-91
autoReﬁneMesh utility, U-92
axes
right-handed, U-136
right-handed rectangular Cartesian, P-15,
U-20
axi-symmetric cases, U-135, U-144
axi-symmetric mesh, U-130
B
background
process, U-26, U-81
backward
keyword entry, U-119
Backward diﬀerencing, P-39
barotropicCompressibilityModels
library, U-99
Open∇FOAM-2.1.0
P-74 Index
basicMultiComponentMixture model, U-99,
U-180
basicSolidThermo
library, U-100
basicThermophysicalModels
library, U-98
binary
keyword entry, U-112
BirdCarreau model, U-102
blended diﬀerencing, P-38
block
expansion ratio, U-140
block keyword, U-138
blocking
keyword entry, U-80
blockMesh
library, U-97
blockMesh solver, P-47
blockMesh utility, U-38, U-90, U-136
blockMesh executable
vertex numbering, U-140
blockMeshDict
dictionary, U-20, U-22, U-37, U-50, U-136,
U-144
blocks keyword, U-22, U-32, U-140
boundaries, U-132
boundary, U-132
boundary
dictionary, U-129, U-136
boundary keyword, U-141
boundary condition
alphaContactAngle, U-59
calculated, U-136
cyclic, U-135, U-142
directionMixed, U-136
empty, P-63, P-69, U-20, U-130, U-135
ﬁxedGradient, U-136
ﬁxedValue, U-136
ﬂuxCorrectedVelocity, U-137
inlet, P-69
inletOutlet, U-137
mixed, U-136
movingWallVelocity, U-137
outlet, P-69
outletInlet, U-137
partialSlip, U-137
patch, U-135
pressureDirectedInletVelocity, U-137
pressureInletVelocity, U-137
pressureOutlet, P-63
pressureTransmissive, U-137
processor, U-135
setup, U-22
slip, U-137
supersonicFreeStream, U-137
surfaceNormalFixedValue, U-137
symmetryPlane, P-63, U-135
totalPressure, U-137
turbulentInlet, U-137
wall, U-42
wall, P-63, P-69, U-59, U-135
wallBuoyantPressure, U-137
wedge, U-130, U-135, U-144
zeroGradient, U-136
boundary conditions, P-43
Dirichlet, P-43
inlet, P-44
Neumann, P-43
no-slip impermeable wall, P-44
outlet, P-44
physical, P-44
symmetry plane, P-44
boundaryField keyword, U-23, U-108
boundaryFoam solver, U-85
bounded
keyword entry, U-117, U-118
boxToCell keyword, U-60
boxTurb utility, U-90
breaking of a dam, U-57
bubbleFoam solver, U-87
buoyantBafﬂeSimpleFoam solver, U-88
buoyantBoussinesqPimpleFoam solver, U-88
buoyantBoussinesqSimpleFoam solver, U-88
buoyantPimpleFoam solver, U-88
buoyantSimpleFoam solver, U-88
buoyantSimpleRadiationFoam solver, U-88
button
Apply, U-164, U-168
Auto Accept, U-168
Choose Preset, U-166
Delete, U-164
Edit Color Map, U-165
Enable Line Series, U-36
Orientation Axes, U-26, U-167
Refresh Times, U-27
Rescale to Data Range, U-27
Reset, U-164
Set Ambient Color, U-166
Update GUI, U-165
Use Parallel Projection, U-26
Use parallel projection, U-167
C
C++ syntax
/*...*/, U-78
//, U-78
# include, U-72, U-78
cacheAgglomeration keyword, U-123
Open∇FOAM-2.1.0
Index P-75
calculated
boundary condition, U-136
cAlpha keyword, U-63
cases, U-103
castellatedMesh keyword, U-146
castellatedMeshControls
dictionary, U-147–U-149
castellatedMeshControls keyword, U-146
cavitatingFoam solver, U-87
cavity ﬂow, U-19
CEI ARCH
environment variable, U-173
CEI HOME
environment variable, U-173
cell
expansion ratio, U-140
cell class, P-31
cell
keyword entry, U-174
cellLimited
keyword entry, U-117
cellPoint
keyword entry, U-174
cellPointFace
keyword entry, U-174
cells
dictionary, U-136
central diﬀerencing, P-38
cfdTools tools, U-97
cfx4ToFoam utility, U-90, U-154
changeDictionary utility, U-90
channelFoam solver, U-85
Charts window panel, U-168
checkMesh utility, U-91, U-155
chemFoam solver, U-88
chemistryModel
library, U-100
chemistryModel model, U-100
chemistrySolver model, U-100
chemkinToFoam utility, U-96
Choose Preset button, U-166
chtMultiRegionFoam solver, U-88
Chung
library, U-99
class
cell, P-31
dimensionSet, P-25, P-32, P-33
face, P-31
ﬁniteVolumeCalculus, P-33
ﬁniteVolumeMethod, P-33
fvMesh, P-31
fvSchemes, P-36
fvc, P-36
fvm, P-36
pointField, P-31
polyBoundaryMesh, P-31
polyMesh, P-31, U-127, U-129
polyPatchList, P-31
polyPatch, P-31
scalarField, P-29
scalar, P-23
slice, P-31
symmTensorField, P-29
symmTensorThirdField, P-29
tensorField, P-29
tensorThirdField, P-29
tensor, P-23
vectorField, P-29
vector, P-23, U-107
word, P-25, P-31
class keyword, U-105
clockTime
keyword entry, U-111
cloud keyword, U-175
cmptAv
tensor member function, P-25
Co utility, U-93
coalChemistryFoam solver, U-88
coalCombustion
library, U-98
cofactors
tensor member function, P-25
coldEngineFoam solver, U-88
collapseEdges utility, U-92
Color By menu, U-166
Color Legend window, U-29
Color Legend window panel, U-166
Color Scale window panel, U-166
Colors window panel, U-168
combinePatchFaces utility, U-92
comments, U-78
commsType keyword, U-80
compressed
keyword entry, U-112
compressibleInterFoam solver, U-87
compressibleLESModels
library, U-102
compressibleRASModels
library, U-101
constant directory, U-104, U-179
constLaminarFlameSpeed model, U-99
constTransport model, U-100, U-180
containers tools, U-96
continuum
mechanics, P-15
control
of time, U-111
controlDict
Open∇FOAM-2.1.0
P-76 Index
dictionary, P-65, U-23, U-32, U-43, U-52,
U-62, U-104, U-160
controlDict ﬁle, P-50
convection, see divergence, P-38
convergence, U-40
conversion
library, U-98
convertToMeters keyword, U-138
coordinate
system, P-15
coordinate system, U-20
corrected
keyword entry, U-117, U-118
Courant number, P-42, U-24
Cp keyword, U-181
cpuTime
keyword entry, U-111
Crank Nicholson
temporal discretisation, P-42
CrankNicholson
keyword entry, U-119
createBaﬄes utility, U-91
createPatch utility, U-91
createTurbulenceFields utility, U-93
cross product, see tensor, vector cross product
CrossPowerLaw
keyword entry, U-61
CrossPowerLaw model, U-102
cubeRootVolDelta model, U-101
cubicCorrected
keyword entry, U-119
cubicCorrection
keyword entry, U-116
curl, P-37
curl
fvc member function, P-37
Current Time Controls menu, U-27, U-165
curve keyword, U-175
Cv keyword, U-181
cyclic
boundary condition, U-135, U-142
cyclic
keyword entry, U-134
cylinder
ﬂow around a, P-45
D
d2dt2
fvc member function, P-37
fvm member function, P-37
dam
breaking of a, U-57
datToFoam utility, U-90
db tools, U-96
ddt
fvc member function, P-37
fvm member function, P-37
DeardorﬀDiﬀStress model, U-102
debug keyword, U-146
decomposePar utility, U-81, U-82, U-95
decomposeParDict
dictionary, U-81
decomposition
of ﬁeld, U-81
of mesh, U-81
decompositionMethods
library, U-98
decompression of a tank, P-62
defaultFieldValues keyword, U-60
deformedGeom utility, U-91
Delete button, U-164
delta keyword, U-83, U-184
deltaT keyword, U-111
dependencies, U-72
dependency lists, U-72
det
tensor member function, P-25
determinant, see tensor, determinant
dev
tensor member function, P-25
diag
tensor member function, P-25
diagonal
keyword entry, U-121, U-122
DIC
keyword entry, U-122
DICGaussSeidel
keyword entry, U-122
dictionary
LESProperties, U-183
PISO, U-25
blockMeshDict, U-20, U-22, U-37, U-50,
U-136, U-144
boundary, U-129, U-136
castellatedMeshControls, U-147–U-149
cells, U-136
controlDict, P-65, U-23, U-32, U-43, U-52,
U-62, U-104, U-160
decomposeParDict, U-81
faces, U-129, U-136
fvSchemes, U-62, U-63, U-104, U-113
fvSolution, U-104, U-120
mechanicalProperties, U-51
neighbour, U-129
owner, U-129
points, U-129, U-136
thermalProperties, U-52
thermophysicalProperties, U-179
Open∇FOAM-2.1.0
Index P-77
transportProperties, U-23, U-40, U-43
turbulenceProperties, U-42, U-61, U-183
dieselEngineFoam solver, U-88
dieselFoam solver, U-88
dieselMixture model, U-99, U-180
dieselSpray
library, U-98
diﬀerencing
Backward, P-39
blended, P-38
central, P-38
Euler implicit, P-39
Gamma, P-38
MINMOD, P-38
SUPERBEE, P-38
upwind, P-38
van Leer, P-38
DILU
keyword entry, U-122
dimension
checking in OpenFOAM, P-25, U-107
dimensional units, U-107
dimensioned<Type> template class, P-25
dimensionedTypes tools, U-97
dimensions keyword, U-22, U-108
dimensionSet class, P-25, P-32, P-33
dimensionSet tools, U-97
directionMixed
boundary condition, U-136
directory
0.000000e+00, U-104
0, U-104
Make, U-73
constant, U-104, U-179
ﬂuentInterface, U-170
polyMesh, U-104, U-129
processorN, U-82
run, U-103
system, P-50, U-104
tutorials, P-45, U-19
discretisation
equation, P-33
Display window panel, U-25, U-27,
U-164, U-165
distance
keyword entry, U-149, U-175
distributed model, U-98
distributed keyword, U-83, U-84
distributionModels
library, U-98
div
fvc member function, P-37
fvm member function, P-37
divergence, P-37, P-39
divSchemes keyword, U-114
dnsFoam solver, U-87
doLayers keyword, U-146
double inner product, see tensor,double inner
product
dsmc
library, U-98
dsmcFieldsCalc utility, U-94
dsmcFoam solver, U-89
dsmcInitialise utility, U-90
dx
keyword entry, U-174
dynamicFvMesh
library, U-97
dynamicMesh
library, U-97
dynLagrangian model, U-101
dynMixedSmagorinsky model, U-101
dynOneEqEddy model, U-101, U-102
dynSmagorinsky model, U-101
E
eConstThermo model, U-100, U-179
edgeGrading keyword, U-140
edgeMesh
library, U-97
edges keyword, U-138
Edit menu, U-167, U-168
Edit Color Map button, U-165
egrMixture model, U-99, U-180
electrostaticFoam solver, U-89
empty
boundary condition, P-63, P-69, U-20,
U-130, U-135
empty
keyword entry, U-134
Enable Line Series button, U-36
endTime keyword, U-24, U-111
engine
library, U-98
engineCompRatio utility, U-94
engineFoam solver, U-88
engineSwirl utility, U-90
ensight74FoamExec utility, U-172
ENSIGHT7 INPUT
environment variable, U-173
ENSIGHT7 READER
environment variable, U-173
ensightFoamReader utility, U-92
enstrophy utility, U-93
environment variable
CEI ARCH, U-173
CEI HOME, U-173
ENSIGHT7 INPUT, U-173
Open∇FOAM-2.1.0
P-78 Index
ENSIGHT7 READER, U-173
FOAM RUN, U-103
WM ARCH OPTION, U-76
WM ARCH, U-76
WM COMPILER BIN, U-76
WM COMPILER DIR, U-76
WM COMPILER LIB, U-76
WM COMPILER, U-76
WM COMPILE OPTION, U-76
WM DIR, U-76
WM MPLIB, U-76
WM OPTIONS, U-76
WM PRECISION OPTION, U-76
WM PROJECT DIR, U-76
WM PROJECT INST DIR, U-76
WM PROJECT USER DIR, U-76
WM PROJECT VERSION, U-76
WM PROJECT, U-76
wmake, U-75
ePsiThermo model, U-98, U-180
equilibriumCO utility, U-96
equilibriumFlameT utility, U-96
errorReduction keyword, U-153
Euler
keyword entry, U-119
Euler implicit
diﬀerencing, P-39
temporal discretisation, P-42
examples
decompression of a tank, P-62
ﬂow around a cylinder, P-45
ﬂow over backward step, P-53
Hartmann problem, P-67
supersonic ﬂow over forward step, P-58
execFlowFunctionObjects utility, U-94
expandDictionary utility, U-96
expansionRatio keyword, U-152
explicit
temporal discretisation, P-42
extrude2DMesh utility, U-90
extrudeMesh utility, U-90
extrudeToRegionMesh utility, U-90
F
face class, P-31
face keyword, U-175
faceAgglomerate utility, U-90
faceAreaPair
keyword entry, U-122
faceLimited
keyword entry, U-117
faces
dictionary, U-129, U-136
FDIC
keyword entry, U-122
featureAngle keyword, U-152
features keyword, U-147, U-148
ﬁeld
U, U-24
p, U-24
decomposition, U-81
FieldField<Type> template class, P-32
ﬁeldFunctionObjects
library, U-97
ﬁelds, P-29
mapping, U-160
ﬁelds tools, U-97
fields keyword, U-174
Field<Type> template class, P-29
fieldValues keyword, U-60
ﬁeldview9Reader utility, U-92
ﬁle
Make/ﬁles, U-74
controlDict, P-50
ﬁles, U-73
g, U-61
options, U-73
snappyHexMeshDict, U-145
transportProperties, U-61
ﬁle format, U-104
ﬁleFormats
library, U-98
fileModificationChecking keyword, U-80
fileModificationSkew keyword, U-80
ﬁles ﬁle, U-73
filteredLinear2
keyword entry, U-116
finalLayerRatio keyword, U-152
ﬁnancialFoam solver, U-89
ﬁnite volume
discretisation, P-27
mesh, P-31
ﬁniteVolume
library, U-97
ﬁniteVolume tools, U-97
ﬁniteVolumeCalculus class, P-33
ﬁniteVolumeMethod class, P-33
ﬁreFoam solver, U-88
firstTime keyword, U-111
fixed
keyword entry, U-112
ﬁxedGradient
boundary condition, U-136
ﬁxedValue
boundary condition, U-136
ﬂattenMesh utility, U-91
floatTransfer keyword, U-80
ﬂow
Open∇FOAM-2.1.0
Index P-79
free surface, U-57
laminar, U-19
steady, turbulent, P-53
supersonic, P-59
turbulent, U-19
ﬂow around a cylinder, P-45
ﬂow over backward step, P-53
ﬂowType utility, U-93
ﬂuent3DMeshToFoam utility, U-90
ﬂuentInterface directory, U-170
ﬂuentMeshToFoam utility, U-90, U-154
ﬂuxCorrectedVelocity
boundary condition, U-137
fluxRequired keyword, U-114
OpenFOAM
cases, U-103
FOAM RUN
environment variable, U-103
foamCalc utility, U-34, U-94
foamCalcFunctions
library, U-97
foamCorrectVrt script/alias, U-158
foamDataToFluent utility, U-92, U-170
foamDebugSwitches utility, U-96
FoamFile keyword, U-105
foamFile
keyword entry, U-174
foamFormatConvert utility, U-96
foamInfoExec utility, U-96
foamJob script/alias, U-177
foamListTimes utility, U-94
foamLog script/alias, U-177
foamMeshToFluent utility, U-90, U-170
foamToEnsight utility, U-92
foamToEnsightParts utility, U-92
foamToFieldview9 utility, U-92
foamToGMV utility, U-92
foamToStarMesh utility, U-90
foamToSurface utility, U-91
foamToTecplot360 utility, U-92
foamToVTK utility, U-92
foamUpgradeCyclics utility, U-90
foamUpgradeFvSolution utility, U-90
forces
library, U-97
foreground
process, U-26
format keyword, U-105
fourth
keyword entry, U-117, U-118
functions keyword, U-112
fvc class, P-36
fvc member function
curl, P-37
d2dt2, P-37
ddt, P-37
div, P-37
gGrad, P-37
grad, P-37
laplacian, P-37
lsGrad, P-37
snGrad, P-37
snGradCorrection, P-37
sqrGradGrad, P-37
fvDOM
library, U-99
fvm class, P-36
fvm member function
d2dt2, P-37
ddt, P-37
div, P-37
laplacian, P-37
Su, P-37
SuSp, P-37
fvMatrices tools, U-97
fvMatrix template class, P-33
fvMesh class, P-31
fvMesh tools, U-97
fvMotionSolvers
library, U-97
fvSchemes
dictionary, U-62, U-63, U-104, U-113
fvSchemes class, P-36
fvSchemes
menu entry, U-53
fvSolution
dictionary, U-104, U-120
G
g ﬁle, U-61
gambitToFoam utility, U-91, U-154
GAMG
keyword entry, U-54, U-121, U-122
Gamma
keyword entry, U-116
Gamma diﬀerencing, P-38
Gauss
keyword entry, U-117
Gauss’s theorem, P-36
GaussSeidel
keyword entry, U-122
General window panel, U-167, U-168
general
keyword entry, U-112
genericFvPatchField
library, U-98
geometric-algebraic multi-grid, U-122
GeometricBoundaryField template class, P-32
Open∇FOAM-2.1.0
P-80 Index
geometricField<Type> template class, P-32
geometry keyword, U-146
gGrad
fvc member function, P-37
global tools, U-97
gmshToFoam utility, U-91
gnuplot
keyword entry, U-112, U-174
grad
fvc member function, P-37
(Grad Grad) squared, P-37
gradient, P-37, P-40
Gauss scheme, P-40
Gauss’s theorem, U-53
least square ﬁt, U-53
least squares method, P-40, U-53
surface normal, P-40
gradSchemes keyword, U-114
graph tools, U-97
graphFormat keyword, U-112
GuldersEGRLaminarFlameSpeed model, U-99
GuldersLaminarFlameSpeed model, U-99
H
hConstThermo model, U-100, U-179
Help menu, U-167
HerschelBulkley model, U-102
Hf keyword, U-181
hhuMixtureThermo model, U-99, U-180
hierarchical
keyword entry, U-82, U-83
highCpCoeffs keyword, U-182
homogenousDynSmagorinsky model, U-101
homogeneousMixture model, U-99, U-180
hPolynomialThermo model, U-100, U-179
hPsiMixtureThermo model, U-99, U-180
hPsiThermo model, U-98, U-180
hRhoMixtureThermo model, U-99, U-180
hRhoThermo model, U-98, U-180
hsPsiMixtureThermo model, U-99, U-180
hsPsiThermo model, U-98, U-180
hsRhoMixtureThermo model, U-99, U-180
hsRhoThermo model, U-98, U-180
I
I
tensor member function, P-25
icoFoam solver, U-19, U-23, U-24, U-26, U-85
icoPolynomial model, U-100, U-179
icoUncoupledKinematicParcelDyMFoam solver,
U-88
icoUncoupledKinematicParcelFoam solver, U-88
ideasToFoam utility, U-154
ideasUnvToFoam utility, U-91
identities, see tensor, identities
identity, see tensor, identity
incompressibleLESModels
library, U-101
incompressibleRASModels
library, U-100
incompressibleTransportModels
library, P-54, U-102
incompressibleTurbulenceModels
library, P-54
index
notation, P-16, P-17
Information window panel, U-164
inhomogeneousMixture model, U-99, U-180
inlet
boundary condition, P-69
inletOutlet
boundary condition, U-137
inner product, see tensor, inner product
inotify
keyword entry, U-80
inotifyMaster
keyword entry, U-80
inside
keyword entry, U-149
insideCells utility, U-91
interDyMFoam solver, U-87
interfaceProperties
library, U-102
interfaceProperties model, U-102
interFoam solver, U-87
interMixingFoam solver, U-87
internalField keyword, U-23, U-108
interPhaseChangeFoam solver, U-87
interpolation tools, U-97
interpolationScheme keyword, U-174
interpolations tools, U-97
interpolationSchemes keyword, U-114
inv
tensor member function, P-25
iterations
maximum, U-121
J
janafThermo model, U-100, U-179
jobControl
library, U-97
jplot
keyword entry, U-112, U-174
K
kEpsilon model, U-100, U-101
keyword
As, U-182
Open∇FOAM-2.1.0
Index P-81
Cp, U-181
Cv, U-181
FoamFile, U-105
Hf, U-181
LESModel, U-184
Pr, U-182
RASModel, U-183
Tcommon, U-182
Thigh, U-182
Tlow, U-182
Ts, U-182
addLayersControls, U-146
adjustTimeStep, U-62
agglomerator, U-122
arc, U-138
blocks, U-22, U-32, U-140
block, U-138
boundaryField, U-23, U-108
boundary, U-141
boxToCell, U-60
cAlpha, U-63
cacheAgglomeration, U-123
castellatedMeshControls, U-146
castellatedMesh, U-146
class, U-105
cloud, U-175
commsType, U-80
convertToMeters, U-138
curve, U-175
debug, U-146
defaultFieldValues, U-60
deltaT, U-111
delta, U-83, U-184
dimensions, U-22, U-108
distributed, U-83, U-84
divSchemes, U-114
doLayers, U-146
edgeGrading, U-140
edges, U-138
endTime, U-24, U-111
errorReduction, U-153
expansionRatio, U-152
face, U-175
featureAngle, U-152
features, U-147, U-148
fieldValues, U-60
fields, U-174
fileModificationChecking, U-80
fileModificationSkew, U-80
finalLayerRatio, U-152
firstTime, U-111
floatTransfer, U-80
fluxRequired, U-114
format, U-105
functions, U-112
geometry, U-146
gradSchemes, U-114
graphFormat, U-112
highCpCoeffs, U-182
internalField, U-23, U-108
interpolationSchemes, U-114
interpolationScheme, U-174
laplacianSchemes, U-114
latestTime, U-40
layers, U-152
leastSquares, U-53
levels, U-150
libs, U-80, U-112
locationInMesh, U-148, U-149
location, U-105
lowCpCoeffs, U-182
manualCoeffs, U-83
maxAlphaCo, U-62
maxBoundarySkewness, U-153
maxConcave, U-153
maxCo, U-62
maxDeltaT, U-62
maxFaceThicknessRatio, U-152
maxGlobalCells, U-148
maxInternalSkewness, U-153
maxIter, U-121
maxLocalCells, U-148
maxNonOrtho, U-153
maxThicknessToMedialRatio, U-152
mergeLevels, U-123
mergePatchPairs, U-138
mergeTolerance, U-146
meshQualityControls, U-146
method, U-83
midPointAndFace, U-175
midPoint, U-175
minArea, U-153
minDeterminant, U-153
minFaceWeight, U-153
minFlatness, U-153
minMedianAxisAngle, U-152
minRefinementCells, U-148
minThickness, U-152
minTriangleTwist, U-153
minTwist, U-153
minVolRatio, U-153
minVol, U-153
mode, U-149
molWeight, U-181
mu, U-182
nAlphaSubCycles, U-63
nBufferCellsNoExtrude, U-152
nCellsBetweenLevels, U-148
Open∇FOAM-2.1.0
P-82 Index
nFaces, U-130
nFinestSweeps, U-123
nGrow, U-152
nLayerIter, U-152
nMoles, U-181
nPostSweeps, U-123
nPreSweeps, U-123
nRelaxIter, U-150, U-152
nRelaxedIter, U-152
nSmoothNormals, U-152
nSmoothPatch, U-150
nSmoothScale, U-153
nSmoothSurfaceNormals, U-152
nSmoothThickness, U-152
nSolveIter, U-150
neighbourPatch, U-142
numberOfSubdomains, U-83
n, U-83
object, U-105
order, U-83
pRefCell, U-25, U-125
pRefValue, U-25, U-125
p rhgRefCell, U-125
p rhgRefValue, U-125
patchMap, U-160
patches, U-138
preconditioner, U-121, U-122
pressure, U-51
printCoeffs, U-43, U-183
processorWeights, U-82
processorWeights, U-83
purgeWrite, U-112
refGradient, U-136
refinementRegions, U-148, U-150
refinementSurfaces, U-148
refinementRegions, U-149
regions, U-60
relTol, U-54, U-121
relativeSizes, U-152
relaxed, U-153
resolveFeatureAngle, U-148
roots, U-83, U-84
runTimeModifiable, U-112
scotchCoeffs, U-83
setFormat, U-174
sets, U-174
simpleGrading, U-140
simulationType, U-42, U-61, U-183
smoother, U-123
snGradSchemes, U-114
snapControls, U-146
snap, U-146
solvers, U-120
solver, U-54, U-121
specie, U-181
spline, U-138
startFace, U-130
startFrom, U-24, U-111
startTime, U-24, U-111
stopAt, U-111
strategy, U-82, U-83
surfaceFormat, U-174
surfaces, U-174
thermoType, U-179
thermodynamics, U-181
timeFormat, U-112
timePrecision, U-112
timeScheme, U-114
tolerance, U-54, U-121, U-150
topoSetSource, U-60
traction, U-51
transport, U-181
turbulence, U-183
type, U-132, U-133
uniform, U-175
valueFraction, U-136
value, U-23, U-136
version, U-105
vertices, U-22, U-138, U-139
writeCompression, U-112
writeControl, U-24, U-62, U-111
writeFormat, U-56, U-112
writeInterval, U-24, U-33, U-111
writePrecision, U-112
<LESModel>Coeffs, U-184
<RASModel>Coeffs, U-183
<delta>Coeffs, U-184
keyword entry
CrankNicholson, U-119
CrossPowerLaw, U-61
DICGaussSeidel, U-122
DIC, U-122
DILU, U-122
Euler, U-119
FDIC, U-122
GAMG, U-54, U-121, U-122
Gamma, U-116
GaussSeidel, U-122
Gauss, U-117
LESModel, U-42, U-183
MGridGen, U-123
MUSCL, U-116
Newtonian, U-61
PBiCG, U-121
PCG, U-121
QUICK, U-119
RASModel, U-42, U-183
SFCD, U-116, U-119
Open∇FOAM-2.1.0
Index P-83
UMIST, U-115
adjustableRunTime, U-62, U-111
arc, U-139
ascii, U-112
backward, U-119
binary, U-112
blocking, U-80
bounded, U-117, U-118
cellLimited, U-117
cellPointFace, U-174
cellPoint, U-174
cell, U-174
clockTime, U-111
compressed, U-112
corrected, U-117, U-118
cpuTime, U-111
cubicCorrected, U-119
cubicCorrection, U-116
cyclic, U-134
diagonal, U-121, U-122
distance, U-149, U-175
dx, U-174
empty, U-134
faceAreaPair, U-122
faceLimited, U-117
filteredLinear2, U-116
fixed, U-112
foamFile, U-174
fourth, U-117, U-118
general, U-112
gnuplot, U-112, U-174
hierarchical, U-82, U-83
inotifyMaster, U-80
inotify, U-80
inside, U-149
jplot, U-112, U-174
laminar, U-42, U-183
latestTime, U-111
leastSquares, U-117
limitedCubic, U-116
limitedLinear, U-116
limited, U-117, U-118
linearUpwind, U-116, U-119
linear, U-116, U-119
line, U-139
localEuler, U-119
manual, U-82, U-83
metis, U-83
midPoint, U-116
nextWrite, U-111
noWriteNow, U-111
nonBlocking, U-80
none, U-115, U-122
null, U-174
outside, U-149
patch, U-134, U-176
polyLine, U-139
polySpline, U-139
processor, U-134
raw, U-112, U-174
runTime, U-33, U-111
scheduled, U-80
scientific, U-112
scotch, U-82, U-83
simpleSpline, U-139
simple, U-82, U-83
skewLinear, U-116, U-119
smoothSolver, U-121
startTime, U-24, U-111
steadyState, U-119
stl, U-174
symmetryPlane, U-134
timeStampMaster, U-80
timeStamp, U-80
timeStep, U-24, U-33, U-111
uncompressed, U-112
uncorrected, U-117, U-118
upwind, U-116, U-119
vanLeer, U-116
vtk, U-174
wall, U-134
wedge, U-134
writeControl, U-111
writeNow, U-111
xmgr, U-112, U-174
xyz, U-175
x, U-175
y, U-175
z, U-175
kivaToFoam utility, U-91
kOmega model, U-100
kOmegaSST model, U-100, U-101
kOmegaSSTSAS model, U-101
Kronecker delta, P-20
L
lagrangian
library, U-98
lagrangianIntermediate
library, U-98
Lambda2 utility, U-93
LamBremhorstKE model, U-101
laminar model, U-100, U-101
laminar
keyword entry, U-42, U-183
laminarFlameSpeedModels
library, U-99
laplaceFilter model, U-101
Open∇FOAM-2.1.0
P-84 Index
Laplacian, P-38
laplacian, P-37
laplacian
fvc member function, P-37
fvm member function, P-37
laplacianFoam solver, U-85
laplacianSchemes keyword, U-114
latestTime
keyword entry, U-111
latestTime keyword, U-40
LaunderGibsonRSTM model, U-101
LaunderSharmaKE model, U-101
layers keyword, U-152
leastSquares
keyword entry, U-117
leastSquares keyword, U-53
LESdeltas
library, U-101
LESﬁlters
library, U-101
LESModel
keyword entry, U-42, U-183
LESModel keyword, U-184
LESProperties
dictionary, U-183
levels keyword, U-150
libraries, U-69
library
Chung, U-99
LESdeltas, U-101
LESﬁlters, U-101
MGridGenGAMGAgglomeration, U-98
ODE, U-97
OSspeciﬁc, U-98
OpenFOAM, U-96
P1, U-99
PV3FoamReader, U-163
PVFoamReader, U-163
SLGThermo, U-100
Wallis, U-99
autoMesh, U-97
barotropicCompressibilityModels, U-99
basicSolidThermo, U-100
basicThermophysicalModels, U-98
blockMesh, U-97
chemistryModel, U-100
coalCombustion, U-98
compressibleLESModels, U-102
compressibleRASModels, U-101
conversion, U-98
decompositionMethods, U-98
dieselSpray, U-98
distributionModels, U-98
dsmc, U-98
dynamicFvMesh, U-97
dynamicMesh, U-97
edgeMesh, U-97
engine, U-98
ﬁeldFunctionObjects, U-97
ﬁleFormats, U-98
ﬁniteVolume, U-97
foamCalcFunctions, U-97
forces, U-97
fvDOM, U-99
fvMotionSolvers, U-97
genericFvPatchField, U-98
incompressibleLESModels, U-101
incompressibleRASModels, U-100
incompressibleTransportModels, P-54, U-102
incompressibleTurbulenceModels, P-54
interfaceProperties, U-102
jobControl, U-97
lagrangianIntermediate, U-98
lagrangian, U-98
laminarFlameSpeedModels, U-99
linear, U-99
liquidMixtureProperties, U-100
liquidProperties, U-100
meshTools, U-97
molecularMeasurements, U-98
molecule, U-98
pairPatchAgglomeration, U-98
postCalc, U-97
potential, U-98
primitive, P-23
radiationModels, U-99
randomProcesses, U-98
reactionThermophysicalModels, U-99
sampling, U-97
solidMixtureProperties, U-100
solidParticle, U-98
solidProperties, U-100
solid, U-100
specie, U-100
surfMesh, U-97
surfaceFilmModels, U-102
systemCall, U-97
thermalPorousZone, U-100
thermophysicalFunctions, U-100
thermophysical, U-179
topoChangerFvMesh, U-98
triSurface, U-97
twoPhaseInterfaceProperties, U-102
utilityFunctionObjects, U-97
viewFactor, U-99
vtkFoam, U-163
vtkPV3Foam, U-163
libs keyword, U-80, U-112
Open∇FOAM-2.1.0
Index P-85
lid-driven cavity ﬂow, U-19
LienCubicKE model, U-101
LienCubicKELowRe model, U-101
LienLeschzinerLowRe model, U-101
Lights window panel, U-167
limited
keyword entry, U-117, U-118
limitedCubic
keyword entry, U-116
limitedLinear
keyword entry, U-116
line
keyword entry, U-139
Line Style menu, U-36
linear
library, U-99
linear
keyword entry, U-116, U-119
linearUpwind
keyword entry, U-116, U-119
liquid
electrically-conducting, P-67
liquidMixtureProperties
library, U-100
liquidProperties
library, U-100
lists, P-29
List<Type> template class, P-29
localEuler
keyword entry, U-119
location keyword, U-105
locationInMesh keyword, U-148, U-149
locDynOneEqEddy model, U-101
lowCpCoeffs keyword, U-182
lowReOneEqEddy model, U-102
LRDDiﬀStress model, U-102
LRR model, U-101
lsGrad
fvc member function, P-37
LTSInterFoam solver, U-87
LTSReactingParcelFoam solver, U-88
M
Mach utility, U-93
mag
tensor member function, P-25
magneticFoam solver, U-89
magnetohydrodynamics, P-67
magSqr
tensor member function, P-25
Make directory, U-73
make script/alias, U-71
Make/ﬁles ﬁle, U-74
manual
keyword entry, U-82, U-83
manualCoeffs keyword, U-83
mapFields utility, U-32, U-39, U-43, U-56, U-90,
U-160
mapping
ﬁelds, U-160
Marker Style menu, U-36
matrices tools, U-97
max
tensor member function, P-25
maxAlphaCo keyword, U-62
maxBoundarySkewness keyword, U-153
maxCo keyword, U-62
maxConcave keyword, U-153
maxDeltaT keyword, U-62
maxDeltaxyz model, U-101
maxFaceThicknessRatio keyword, U-152
maxGlobalCells keyword, U-148
maximum iterations, U-121
maxInternalSkewness keyword, U-153
maxIter keyword, U-121
maxLocalCells keyword, U-148
maxNonOrtho keyword, U-153
maxThicknessToMedialRatio keyword, U-152
mdEquilibrationFoam solver, U-89
mdFoam solver, U-89
mdInitialise utility, U-90
mechanicalProperties
dictionary, U-51
memory tools, U-97
menu
Color By, U-166
Current Time Controls, U-27, U-165
Edit, U-167, U-168
Help, U-167
Line Style, U-36
Marker Style, U-36
VCR Controls, U-27, U-165
View, U-167
menu entry
Plot Over Line, U-35
Save Animation, U-169
Save Screenshot, U-169
Settings, U-168
Show Color Legend, U-27
Solid Color, U-166
Toolbars, U-167
View Settings..., U-26
View Settings, U-26, U-167
Wireframe, U-166
fvSchemes, U-53
mergeLevels keyword, U-123
mergeMeshes utility, U-91
mergeOrSplitBaﬄes utility, U-91
Open∇FOAM-2.1.0
P-86 Index
mergePatchPairs keyword, U-138
mergeTolerance keyword, U-146
mesh
1-dimensional, U-130
1D, U-130
2-dimensional, U-130
2D, U-130
axi-symmetric, U-130
basic, P-31
block structured, U-136
decomposition, U-81
description, U-127
ﬁnite volume, P-31
generation, U-136, U-145
grading, U-136, U-140
grading, example of, P-53
non-orthogonal, P-45
reﬁnement, P-62
resolution, U-32
speciﬁcation, U-127
split-hex, U-145
Stereolithography (STL), U-145
surface, U-145
validity constraints, U-127
Mesh Parts window panel, U-25
meshes tools, U-97
meshQualityControls keyword, U-146
meshTools
library, U-97
message passing interface
openMPI, U-82
method keyword, U-83
metis
keyword entry, U-83
MGridGenGAMGAgglomeration
library, U-98
MGridGen
keyword entry, U-123
mhdFoam solver, P-69, U-89
midPoint
keyword entry, U-116
midPoint keyword, U-175
midPointAndFace keyword, U-175
min
tensor member function, P-25
minArea keyword, U-153
minDeterminant keyword, U-153
minFaceWeight keyword, U-153
minFlatness keyword, U-153
minMedianAxisAngle keyword, U-152
MINMOD diﬀerencing, P-38
minRefinementCells keyword, U-148
minThickness keyword, U-152
minTriangleTwist keyword, U-153
minTwist keyword, U-153
minVol keyword, U-153
minVolRatio keyword, U-153
mirrorMesh utility, U-91
mixed
boundary condition, U-136
mixedSmagorinsky model, U-101
mixtureAdiabaticFlameT utility, U-96
mode keyword, U-149
model
APIfunctions, U-100
BirdCarreau, U-102
CrossPowerLaw, U-102
DeardorﬀDiﬀStress, U-102
GuldersEGRLaminarFlameSpeed, U-99
GuldersLaminarFlameSpeed, U-99
HerschelBulkley, U-102
LRDDiﬀStress, U-102
LRR, U-101
LamBremhorstKE, U-101
LaunderGibsonRSTM, U-101
LaunderSharmaKE, U-101
LienCubicKELowRe, U-101
LienCubicKE, U-101
LienLeschzinerLowRe, U-101
NSRDSfunctions, U-100
Newtonian, U-102
NonlinearKEShih, U-101
PrandtlDelta, U-101
RNGkEpsilon, U-101
Smagorinsky2, U-101
Smagorinsky, U-101, U-102
SpalartAllmarasDDES, U-102
SpalartAllmarasIDDES, U-102
SpalartAllmaras, U-101, U-102
anisotropicFilter, U-101
basicMultiComponentMixture, U-99, U-180
chemistryModel, U-100
chemistrySolver, U-100
constLaminarFlameSpeed, U-99
constTransport, U-100, U-180
cubeRootVolDelta, U-101
dieselMixture, U-99, U-180
distributed, U-98
dynLagrangian, U-101
dynMixedSmagorinsky, U-101
dynOneEqEddy, U-101, U-102
dynSmagorinsky, U-101
eConstThermo, U-100, U-179
ePsiThermo, U-98, U-180
egrMixture, U-99, U-180
hConstThermo, U-100, U-179
hPolynomialThermo, U-100, U-179
hPsiMixtureThermo, U-99, U-180
Open∇FOAM-2.1.0
Index P-87
hPsiThermo, U-98, U-180
hRhoMixtureThermo, U-99, U-180
hRhoThermo, U-98, U-180
hhuMixtureThermo, U-99, U-180
homogenousDynSmagorinsky, U-101
homogeneousMixture, U-99, U-180
hsPsiMixtureThermo, U-99, U-180
hsPsiThermo, U-98, U-180
hsRhoMixtureThermo, U-99, U-180
hsRhoThermo, U-98, U-180
icoPolynomial, U-100, U-179
inhomogeneousMixture, U-99, U-180
interfaceProperties, U-102
janafThermo, U-100, U-179
kEpsilon, U-100, U-101
kOmegaSSTSAS, U-101
kOmegaSST, U-100, U-101
kOmega, U-100
laminar, U-100, U-101
laplaceFilter, U-101
locDynOneEqEddy, U-101
lowReOneEqEddy, U-102
maxDeltaxyz, U-101
mixedSmagorinsky, U-101
multiComponentMixture, U-99, U-180
oneEqEddy, U-101, U-102
perfectGas, U-100, U-179
polynomialTransport, U-100, U-180
powerLaw, U-102
ptsotchDecomp, U-98
pureMixture, U-99, U-180
qZeta, U-101
reactingMixture, U-99, U-180
realizableKE, U-101
reconstruct, U-98
scaleSimilarity, U-101
scotchDecomp, U-98
simpleFilter, U-101
smoothDelta, U-101
specieThermo, U-100, U-180
spectEddyVisc, U-102
sutherlandTransport, U-100, U-180
veryInhomogeneousMixture, U-99, U-180
modifyMesh utility, U-92
molecularMeasurements
library, U-98
molecule
library, U-98
molWeight keyword, U-181
moveDynamicMesh utility, U-91
moveEngineMesh utility, U-91
moveMesh utility, U-91
movingWallVelocity
boundary condition, U-137
MPI
openMPI, U-82
MRFInterFoam solver, U-87
MRFMultiphaseInterFoam solver, U-87
MRFSimpleFoam solver, U-85
mshToFoam utility, U-91
mu keyword, U-182
multiComponentMixture model, U-99, U-180
multigrid
geometric-algebraic, U-122
multiphaseInterFoam solver, U-87
MUSCL
keyword entry, U-116
N
n keyword, U-83
nabla
operator, P-27
nAlphaSubCycles keyword, U-63
nBufferCellsNoExtrude keyword, U-152
nCellsBetweenLevels keyword, U-148
neighbour
dictionary, U-129
neighbourPatch keyword, U-142
netgenNeutralToFoam utility, U-91
Newtonian
keyword entry, U-61
Newtonian model, U-102
nextWrite
keyword entry, U-111
nFaces keyword, U-130
nFinestSweeps keyword, U-123
nGrow keyword, U-152
nLayerIter keyword, U-152
nMoles keyword, U-181
non-orthogonal mesh, P-45
nonBlocking
keyword entry, U-80
none
keyword entry, U-115, U-122
NonlinearKEShih model, U-101
nonNewtonianIcoFoam solver, U-86
noWriteNow
keyword entry, U-111
nPostSweeps keyword, U-123
nPreSweeps keyword, U-123
nRelaxedIter keyword, U-152
nRelaxIter keyword, U-150, U-152
nSmoothNormals keyword, U-152
nSmoothPatch keyword, U-150
nSmoothScale keyword, U-153
nSmoothSurfaceNormals keyword, U-152
nSmoothThickness keyword, U-152
nSolveIter keyword, U-150
Open∇FOAM-2.1.0
P-88 Index
NSRDSfunctions model, U-100
null
keyword entry, U-174
numberOfSubdomains keyword, U-83
O
object keyword, U-105
objToVTK utility, U-91
ODE
library, U-97
oneEqEddy model, U-101, U-102
Opacity text box, U-167
OpenFOAM
applications, U-69
ﬁle format, U-104
libraries, U-69
OpenFOAM
library, U-96
OpenFOAM ﬁle syntax
//, U-104
openMPI
message passing interface, U-82
MPI, U-82
operator
scalar, P-28
vector, P-27
Options window, U-168
options ﬁle, U-73
order keyword, U-83
Orientation Axes button, U-26, U-167
OSspeciﬁc
library, U-98
outer product, see tensor, outer product
outlet
boundary condition, P-69
outletInlet
boundary condition, U-137
outside
keyword entry, U-149
owner
dictionary, U-129
P
p ﬁeld, U-24
P1
library, U-99
p rhgRefCell keyword, U-125
p rhgRefValue keyword, U-125
pairPatchAgglomeration
library, U-98
paraFoam, U-25, U-163
parallel
running, U-81
partialSlip
boundary condition, U-137
particleTracks utility, U-94
patch
boundary condition, U-135
patch
keyword entry, U-134, U-176
patchAverage utility, U-93
patches keyword, U-138
patchIntegrate utility, U-94
patchMap keyword, U-160
patchSummary utility, U-96
PBiCG
keyword entry, U-121
PCG
keyword entry, U-121
pdfPlot utility, U-94
PDRFoam solver, U-88
PDRMesh utility, U-92
Pe utility, U-93
perfectGas model, U-100, U-179
permutation symbol, P-19
pimpleDyMFoam solver, U-86
pimpleFoam solver, U-86
Pipeline Browser window, U-25, U-164
PISO
dictionary, U-25
pisoFoam solver, U-19, U-86
Plot Over Line
menu entry, U-35
plot3dToFoam utility, U-91
pointField class, P-31
pointField<Type> template class, P-33
points
dictionary, U-129, U-136
polyBoundaryMesh class, P-31
polyDualMesh utility, U-91
polyLine
keyword entry, U-139
polyMesh directory, U-104, U-129
polyMesh class, P-31, U-127, U-129
polynomialTransport model, U-100, U-180
polyPatch class, P-31
polyPatchList class, P-31
polySpline
keyword entry, U-139
porousExplicitSourceReactingParcelFoam solver,
U-89
porousInterFoam solver, U-87
porousSimpleFoam solver, U-86
post-processing, U-163
post-processing
paraFoam, U-163
postCalc
library, U-97
Open∇FOAM-2.1.0
Index P-89
postChannel utility, U-94
potential
library, U-98
potentialFoam solver, P-46, U-85
pow
tensor member function, P-25
powerLaw model, U-102
pPrime2 utility, U-93
Pr keyword, U-182
PrandtlDelta model, U-101
preconditioner keyword, U-121, U-122
pRefCell keyword, U-25, U-125
pRefValue keyword, U-25, U-125
pressure keyword, U-51
pressure waves
in liquids, P-62
pressureDirectedInletVelocity
boundary condition, U-137
pressureInletVelocity
boundary condition, U-137
pressureOutlet
boundary condition, P-63
pressureTransmissive
boundary condition, U-137
primitive
library, P-23
primitives tools, U-97
printCoeffs keyword, U-43, U-183
processorWeights keyword, U-82
probeLocations utility, U-94
process
background, U-26, U-81
foreground, U-26
processor
boundary condition, U-135
processor
keyword entry, U-134
processorN directory, U-82
processorWeights keyword, U-83
Properties window panel, U-27, U-164
ptot utility, U-94
ptsotchDecomp model, U-98
pureMixture model, U-99, U-180
purgeWrite keyword, U-112
PV3FoamReader
library, U-163
PVFoamReader
library, U-163
Q
Q utility, U-93
QUICK
keyword entry, U-119
qZeta model, U-101
R
R utility, U-93
radiationModels
library, U-99
randomProcesses
library, U-98
RASModel
keyword entry, U-42, U-183
RASModel keyword, U-183
raw
keyword entry, U-112, U-174
reactingFoam solver, U-88
reactingMixture model, U-99, U-180
reactingParcelFilmFoam solver, U-89
reactingParcelFoam solver, U-89
reactionThermophysicalModels
library, U-99
realizableKE model, U-101
reconstruct model, U-98
reconstructPar utility, U-85, U-95
reconstructParMesh utility, U-95
redistributeMeshPar utility, U-96
refGradient keyword, U-136
reﬁneHexMesh utility, U-92
refinementRegions keyword, U-149
reﬁnementLevel utility, U-92
refinementRegions keyword, U-148, U-150
refinementSurfaces keyword, U-148
reﬁneMesh utility, U-91
reﬁneWallLayer utility, U-92
Refresh Times button, U-27
regions keyword, U-60
relative tolerance, U-121
relativeSizes keyword, U-152
relaxed keyword, U-153
relTol keyword, U-54, U-121
removeFaces utility, U-92
Render View window, U-168
Render View window panel, U-168
renumberMesh utility, U-91
Rescale to Data Range button, U-27
Reset button, U-164
resolveFeatureAngle keyword, U-148
restart, U-40
Reynolds number, U-19, U-23
rhoPorousMRFLTSPimpleFoam solver, U-86
rhoPorousMRFPimpleFoam solver, U-86
rhoPorousMRFSimpleFoam solver, U-86
rhoCentralDyMFoam solver, U-86
rhoCentralFoam solver, U-86
rhoPimpleFoam solver, U-86
rhoReactingFoam solver, U-88
rhoSimpleFoam solver, U-86
rhoSimplecFoam solver, U-86
Open∇FOAM-2.1.0
P-90 Index
rmdepall script/alias, U-76
RNGkEpsilon model, U-101
roots keyword, U-83, U-84
rotateMesh utility, U-91
run
parallel, U-81
run directory, U-103
runTime
keyword entry, U-33, U-111
runTimeModifiable keyword, U-112
S
sammToFoam utility, U-91
sample utility, U-94, U-173
sampling
library, U-97
Save Animation
menu entry, U-169
Save Screenshot
menu entry, U-169
scalar, P-16
operator, P-28
scalar class, P-23
scalarField class, P-29
scalarTransportFoam solver, U-85
scale
tensor member function, P-25
scalePoints utility, U-157
scaleSimilarity model, U-101
scheduled
keyword entry, U-80
scientific
keyword entry, U-112
scotch
keyword entry, U-82, U-83
scotchCoeffs keyword, U-83
scotchDecomp model, U-98
script/alias
foamCorrectVrt, U-158
foamJob, U-177
foamLog, U-177
make, U-71
rmdepall, U-76
wclean, U-75
wmake, U-71
second time derivative, P-37
Seed window, U-169
selectCells utility, U-92
Set Ambient Color button, U-166
setFields utility, U-60, U-90
setFormat keyword, U-174
sets keyword, U-174
setSet utility, U-91
setsToZones utility, U-92
Settings
menu entry, U-168
settlingFoam solver, U-87
SFCD
keyword entry, U-116, U-119
shallowWaterFoam solver, U-86
shape, U-140
Show Color Legend
menu entry, U-27
SI units, U-107
simple
keyword entry, U-82, U-83
simpleFilter model, U-101
simpleFoam solver, P-54, U-86
simpleGrading keyword, U-140
simpleSpline
keyword entry, U-139
simulationType keyword, U-42, U-61, U-183
singleCellMesh utility, U-92
skew
tensor member function, P-25
skewLinear
keyword entry, U-116, U-119
SLGThermo
library, U-100
slice class, P-31
slip
boundary condition, U-137
Smagorinsky model, U-101, U-102
Smagorinsky2 model, U-101
smapToFoam utility, U-93
smoothDelta model, U-101
smoother keyword, U-123
smoothSolver
keyword entry, U-121
snap keyword, U-146
snapControls keyword, U-146
snappyHexMesh utility
background mesh, U-146
cell removal, U-149
cell splitting, U-147
mesh layers, U-150
meshing process, U-145
snapping to surfaces, U-150
snappyHexMesh utility, U-90, U-145
snappyHexMeshDict ﬁle, U-145
snGrad
fvc member function, P-37
snGradCorrection
fvc member function, P-37
snGradSchemes keyword, U-114
solid
library, U-100
Solid Color
Open∇FOAM-2.1.0
Index P-91
menu entry, U-166
solidDisplacementFoam solver, U-89
solidDisplacementFoam solver, U-52
solidEquilibriumDisplacementFoam solver, U-89
solidMixtureProperties
library, U-100
solidParticle
library, U-98
solidProperties
library, U-100
solver
LTSInterFoam, U-87
LTSReactingParcelFoam, U-88
MRFInterFoam, U-87
MRFMultiphaseInterFoam, U-87
MRFSimpleFoam, U-85
PDRFoam, U-88
SRFSimpleFoam, U-86
XiFoam, U-88
adjointShapeOptimizationFoam, U-85
blockMesh, P-47
boundaryFoam, U-85
bubbleFoam, U-87
buoyantBafﬂeSimpleFoam, U-88
buoyantBoussinesqPimpleFoam, U-88
buoyantBoussinesqSimpleFoam, U-88
buoyantPimpleFoam, U-88
buoyantSimpleFoam, U-88
buoyantSimpleRadiationFoam, U-88
cavitatingFoam, U-87
channelFoam, U-85
chemFoam, U-88
chtMultiRegionFoam, U-88
coalChemistryFoam, U-88
coldEngineFoam, U-88
compressibleInterFoam, U-87
dieselEngineFoam, U-88
dieselFoam, U-88
dnsFoam, U-87
dsmcFoam, U-89
electrostaticFoam, U-89
engineFoam, U-88
ﬁnancialFoam, U-89
ﬁreFoam, U-88
icoFoam, U-19, U-23, U-24, U-26, U-85
icoUncoupledKinematicParcelDyMFoam,
U-88
icoUncoupledKinematicParcelFoam, U-88
interDyMFoam, U-87
interFoam, U-87
interMixingFoam, U-87
interPhaseChangeFoam, U-87
laplacianFoam, U-85
magneticFoam, U-89
mdEquilibrationFoam, U-89
mdFoam, U-89
mhdFoam, P-69, U-89
multiphaseInterFoam, U-87
nonNewtonianIcoFoam, U-86
pimpleDyMFoam, U-86
pimpleFoam, U-86
pisoFoam, U-19, U-86
porousExplicitSourceReactingParcelFoam,
U-89
porousInterFoam, U-87
porousSimpleFoam, U-86
potentialFoam, P-46, U-85
reactingFoam, U-88
reactingParcelFilmFoam, U-89
reactingParcelFoam, U-89
rhoCentralDyMFoam, U-86
rhoCentralFoam, U-86
rhoPimpleFoam, U-86
rhoReactingFoam, U-88
rhoSimpleFoam, U-86
rhoSimplecFoam, U-86
rhoPorousMRFLTSPimpleFoam, U-86
rhoPorousMRFPimpleFoam, U-86
rhoPorousMRFSimpleFoam, U-86
scalarTransportFoam, U-85
settlingFoam, U-87
shallowWaterFoam, U-86
simpleFoam, P-54, U-86
solidDisplacementFoam, U-89
solidDisplacementFoam, U-52
solidEquilibriumDisplacementFoam, U-89
sonicDyMFoam, U-86
sonicFoam, P-60, U-86
sonicLiquidFoam, P-63, U-86
twoLiquidMixingFoam, U-87
twoPhaseEulerFoam, U-87
uncoupledKinematicParcelFoam, U-89
windSimpleFoam, U-86
solver keyword, U-54, U-121
solver relative tolerance, U-121
solver tolerance, U-121
solvers keyword, U-120
sonicDyMFoam solver, U-86
sonicFoam solver, P-60, U-86
sonicLiquidFoam solver, P-63, U-86
source, P-37
SpalartAllmaras model, U-101, U-102
SpalartAllmarasDDES model, U-102
SpalartAllmarasIDDES model, U-102
specie
library, U-100
specie keyword, U-181
specieThermo model, U-100, U-180
Open∇FOAM-2.1.0
P-92 Index
spectEddyVisc model, U-102
spline keyword, U-138
splitCells utility, U-92
splitMesh utility, U-92
splitMeshRegions utility, U-92
sqr
tensor member function, P-25
sqrGradGrad
fvc member function, P-37
SRFSimpleFoam solver, U-86
star3ToFoam utility, U-91
star4ToFoam utility, U-91
startFace keyword, U-130
startFrom keyword, U-24, U-111
starToFoam utility, U-154
startTime
keyword entry, U-24, U-111
startTime keyword, U-24, U-111
steady ﬂow
turbulent, P-53
steadyParticleTracks utility, U-94
steadyState
keyword entry, U-119
Stereolithography (STL), U-145
stitchMesh utility, U-92
stl
keyword entry, U-174
stopAt keyword, U-111
strategy keyword, U-82, U-83
streamFunction utility, U-93
stress analysis of plate with hole, U-47
stressComponents utility, U-93
Style window panel, U-25, U-166
Su
fvm member function, P-37
subsetMesh utility, U-92
summation convention, P-17
SUPERBEE diﬀerencing, P-38
supersonic ﬂow, P-59
supersonic ﬂow over forward step, P-58
supersonicFreeStream
boundary condition, U-137
surface mesh, U-145
surfaceAdd utility, U-94
surfaceAutoPatch utility, U-94
surfaceCheck utility, U-94
surfaceClean utility, U-94
surfaceCoarsen utility, U-94
surfaceConvert utility, U-94
surfaceFeatureConvert utility, U-94
surfaceFeatureExtract utility, U-94, U-148
surfaceField<Type> template class, P-33
surfaceFilmModels
library, U-102
surfaceFind utility, U-94
surfaceFormat keyword, U-174
surfaceInertia utility, U-95
surfaceMesh tools, U-97
surfaceMeshConvert utility, U-95
surfaceMeshConvertTesting utility, U-95
surfaceMeshExport utility, U-95
surfaceMeshImport utility, U-95
surfaceMeshInfo utility, U-95
surfaceMeshTriangulate utility, U-95
surfaceNormalFixedValue
boundary condition, U-137
surfaceOrient utility, U-95
surfacePointMerge utility, U-95
surfaceRedistributePar utility, U-95
surfaceReﬁneRedGreen utility, U-95
surfaces keyword, U-174
surfaceSmooth utility, U-95
surfaceSplitByPatch utility, U-95
surfaceSplitNonManifolds utility, U-95
surfaceSubset utility, U-95
surfaceToPatch utility, U-95
surfaceTransformPoints utility, U-95
surfMesh
library, U-97
SuSp
fvm member function, P-37
sutherlandTransport model, U-100, U-180
symm
tensor member function, P-25
symmetryPlane
boundary condition, P-63, U-135
symmetryPlane
keyword entry, U-134
symmTensorField class, P-29
symmTensorThirdField class, P-29
system directory, P-50, U-104
systemCall
library, U-97
T
T()
tensor member function, P-25
Tcommon keyword, U-182
template class
GeometricBoundaryField, P-32
fvMatrix, P-33
dimensioned<Type>, P-25
FieldField<Type>, P-32
Field<Type>, P-29
geometricField<Type>, P-32
List<Type>, P-29
pointField<Type>, P-33
surfaceField<Type>, P-33
Open∇FOAM-2.1.0
Index P-93
volField<Type>, P-33
temporal discretisation, P-42
Crank Nicholson, P-42
Euler implicit, P-42
explicit, P-42
in OpenFOAM, P-43
tensor, P-15
addition, P-17
algebraic operations, P-17
algebraic operations in OpenFOAM, P-23
antisymmetric, see tensor, skew
calculus, P-27
classes in OpenFOAM, P-23
cofactors, P-22
component average, P-20
component maximum, P-20
component minimum, P-20
determinant, P-22
deviatoric, P-21
diagonal, P-21
dimension, P-16
double inner product, P-19
geometric transformation, P-20
Hodge dual, P-22
hydrostatic, P-21
identities, P-21
identity, P-20
inner product, P-18
inverse, P-22
magnitude, P-20
magnitude squared, P-20
mathematics, P-15
notation, P-17
nth power, P-20
outer product, P-19
rank, P-16
rank 3, P-16
scalar division, P-18
scalar multiplication, P-17
scale function, P-20
second rank, P-16
skew, P-21
square of, P-20
subtraction, P-17
symmetric, P-21
symmetric rank 2, P-16
symmetric rank 3, P-16
trace, P-21
transformation, P-20
transpose, P-16, P-21
triple inner product, P-19
vector cross product, P-19
tensor class, P-23
tensor member function
*, P-25
+, P-25
-, P-25
/, P-25
&, P-25
&&, P-25
^, P-25
cmptAv, P-25
cofactors, P-25
det, P-25
dev, P-25
diag, P-25
I, P-25
inv, P-25
mag, P-25
magSqr, P-25
max, P-25
min, P-25
pow, P-25
scale, P-25
skew, P-25
sqr, P-25
symm, P-25
T(), P-25
tr, P-25
transform, P-25
tensorField class, P-29
tensorThirdField class, P-29
tetgenToFoam utility, U-91
text box
Opacity, U-167
thermalPorousZone
library, U-100
thermalProperties
dictionary, U-52
thermodynamics keyword, U-181
thermophysical
library, U-179
thermophysicalFunctions
library, U-100
thermophysicalProperties
dictionary, U-179
thermoType keyword, U-179
Thigh keyword, U-182
time
control, U-111
time derivative, P-37
ﬁrst, P-39
second, P-37, P-39
time step, U-24
timeFormat keyword, U-112
timePrecision keyword, U-112
timeScheme keyword, U-114
timeStamp
Open∇FOAM-2.1.0
P-94 Index
keyword entry, U-80
timeStampMaster
keyword entry, U-80
timeStep
keyword entry, U-24, U-33, U-111
Tlow keyword, U-182
tolerance
solver, U-121
solver relative, U-121
tolerance keyword, U-54, U-121, U-150
Toolbars
menu entry, U-167
tools
algorithms, U-96
cfdTools, U-97
containers, U-96
db, U-96
dimensionSet, U-97
dimensionedTypes, U-97
ﬁelds, U-97
ﬁniteVolume, U-97
fvMatrices, U-97
fvMesh, U-97
global, U-97
graph, U-97
interpolations, U-97
interpolation, U-97
matrices, U-97
memory, U-97
meshes, U-97
primitives, U-97
surfaceMesh, U-97
volMesh, U-97
topoChangerFvMesh
library, U-98
topoSet utility, U-92
topoSetSource keyword, U-60
totalPressure
boundary condition, U-137
tr
tensor member function, P-25
trace, see tensor, trace
traction keyword, U-51
transform
tensor member function, P-25
transformPoints utility, U-92
transport keyword, U-181
transportProperties
dictionary, U-23, U-40, U-43
transportProperties ﬁle, U-61
triple inner product, P-19
triSurface
library, U-97
Ts keyword, U-182
turbulence
dissipation, U-41
kinetic energy, U-41
length scale, U-42
turbulence keyword, U-183
turbulence model
RAS, U-41
turbulenceProperties
dictionary, U-42, U-61, U-183
turbulent ﬂow
steady, P-53
turbulentInlet
boundary condition, U-137
tutorials
breaking of a dam, U-57
lid-driven cavity ﬂow, U-19
stress analysis of plate with hole, U-47
tutorials directory, P-45, U-19
twoLiquidMixingFoam solver, U-87
twoPhaseEulerFoam solver, U-87
twoPhaseInterfaceProperties
library, U-102
type keyword, U-132, U-133
U
U ﬁeld, U-24
Ucomponents utility, P-70
UMIST
keyword entry, U-115
uncompressed
keyword entry, U-112
uncorrected
keyword entry, U-117, U-118
uncoupledKinematicParcelFoam solver, U-89
uniform keyword, U-175
units
base, U-107
of measurement, P-25, U-107
S.I. base, P-25
SI, U-107
Syst`eme International, U-107
United States Customary System, U-107
USCS, U-107
Update GUI button, U-165
uprime utility, U-93
upwind
keyword entry, U-116, U-119
upwind diﬀerencing, P-38, U-62
USCS units, U-107
Use Parallel Projection button, U-26
Use parallel projection button, U-167
utility
Co, U-93
Lambda2, U-93
Open∇FOAM-2.1.0
Index P-95
Mach, U-93
PDRMesh, U-92
Pe, U-93
Q, U-93
R, U-93
Ucomponents, P-70
adiabaticFlameT, U-96
ansysToFoam, U-90
applyBoundaryLayer, U-90
applyWallFunctionBoundaryConditions,
U-90
attachMesh, U-91
autoPatch, U-91
autoReﬁneMesh, U-92
blockMesh, U-38, U-90, U-136
boxTurb, U-90
cfx4ToFoam, U-90, U-154
changeDictionary, U-90
checkMesh, U-91, U-155
chemkinToFoam, U-96
collapseEdges, U-92
combinePatchFaces, U-92
createBaﬄes, U-91
createPatch, U-91
createTurbulenceFields, U-93
datToFoam, U-90
decomposePar, U-81, U-82, U-95
deformedGeom, U-91
dsmcFieldsCalc, U-94
dsmcInitialise, U-90
engineCompRatio, U-94
engineSwirl, U-90
ensight74FoamExec, U-172
ensightFoamReader, U-92
enstrophy, U-93
equilibriumCO, U-96
equilibriumFlameT, U-96
execFlowFunctionObjects, U-94
expandDictionary, U-96
extrude2DMesh, U-90
extrudeMesh, U-90
extrudeToRegionMesh, U-90
faceAgglomerate, U-90
ﬁeldview9Reader, U-92
ﬂattenMesh, U-91
ﬂowType, U-93
ﬂuent3DMeshToFoam, U-90
ﬂuentMeshToFoam, U-90, U-154
foamCalc, U-34, U-94
foamDataToFluent, U-92, U-170
foamDebugSwitches, U-96
foamFormatConvert, U-96
foamInfoExec, U-96
foamListTimes, U-94
foamMeshToFluent, U-90, U-170
foamToEnsightParts, U-92
foamToEnsight, U-92
foamToFieldview9, U-92
foamToGMV, U-92
foamToStarMesh, U-90
foamToSurface, U-91
foamToTecplot360, U-92
foamToVTK, U-92
foamUpgradeCyclics, U-90
foamUpgradeFvSolution, U-90
gambitToFoam, U-91, U-154
gmshToFoam, U-91
ideasToFoam, U-154
ideasUnvToFoam, U-91
insideCells, U-91
kivaToFoam, U-91
mapFields, U-32, U-39, U-43, U-56, U-90,
U-160
mdInitialise, U-90
mergeMeshes, U-91
mergeOrSplitBaﬄes, U-91
mirrorMesh, U-91
mixtureAdiabaticFlameT, U-96
modifyMesh, U-92
moveDynamicMesh, U-91
moveEngineMesh, U-91
moveMesh, U-91
mshToFoam, U-91
netgenNeutralToFoam, U-91
objToVTK, U-91
pPrime2, U-93
particleTracks, U-94
patchAverage, U-93
patchIntegrate, U-94
patchSummary, U-96
pdfPlot, U-94
plot3dToFoam, U-91
polyDualMesh, U-91
postChannel, U-94
probeLocations, U-94
ptot, U-94
reconstructParMesh, U-95
reconstructPar, U-85, U-95
redistributeMeshPar, U-96
reﬁneHexMesh, U-92
reﬁneMesh, U-91
reﬁneWallLayer, U-92
reﬁnementLevel, U-92
removeFaces, U-92
renumberMesh, U-91
rotateMesh, U-91
sammToFoam, U-91
sample, U-94, U-173
Open∇FOAM-2.1.0
P-96 Index
scalePoints, U-157
selectCells, U-92
setFields, U-60, U-90
setSet, U-91
setsToZones, U-92
singleCellMesh, U-92
smapToFoam, U-93
snappyHexMesh, U-90, U-145
splitCells, U-92
splitMeshRegions, U-92
splitMesh, U-92
star3ToFoam, U-91
star4ToFoam, U-91
starToFoam, U-154
steadyParticleTracks, U-94
stitchMesh, U-92
streamFunction, U-93
stressComponents, U-93
subsetMesh, U-92
surfaceAdd, U-94
surfaceAutoPatch, U-94
surfaceCheck, U-94
surfaceClean, U-94
surfaceCoarsen, U-94
surfaceConvert, U-94
surfaceFeatureConvert, U-94
surfaceFeatureExtract, U-94, U-148
surfaceFind, U-94
surfaceInertia, U-95
surfaceMeshConvertTesting, U-95
surfaceMeshConvert, U-95
surfaceMeshExport, U-95
surfaceMeshImport, U-95
surfaceMeshInfo, U-95
surfaceMeshTriangulate, U-95
surfaceOrient, U-95
surfacePointMerge, U-95
surfaceRedistributePar, U-95
surfaceReﬁneRedGreen, U-95
surfaceSmooth, U-95
surfaceSplitByPatch, U-95
surfaceSplitNonManifolds, U-95
surfaceSubset, U-95
surfaceToPatch, U-95
surfaceTransformPoints, U-95
tetgenToFoam, U-91
topoSet, U-92
transformPoints, U-92
uprime, U-93
viewFactorGen, U-90
vorticity, U-93
wallFunctionTable, U-90
wallGradU, U-93
wallHeatFlux, U-93
wallShearStress, U-93
wdot, U-94
writeCellCentres, U-94
writeMeshObj, U-91
yPlusLES, U-93
yPlusRAS, U-93
zipUpMesh, U-92
utilityFunctionObjects
library, U-97
V
value keyword, U-23, U-136
valueFraction keyword, U-136
van Leer diﬀerencing, P-38
vanLeer
keyword entry, U-116
VCR Controls menu, U-27, U-165
vector, P-16
operator, P-27
unit, P-20
vector class, P-23, U-107
vector product, see tensor, vector cross product
vectorField class, P-29
version keyword, U-105
vertices keyword, U-22, U-138, U-139
veryInhomogeneousMixture model, U-99, U-180
View menu, U-167
View Settings
menu entry, U-26, U-167
View Settings (Render View) window, U-167
View Settings...
menu entry, U-26
viewFactor
library, U-99
viewFactorGen utility, U-90
viscosity
kinematic, U-23, U-43
volField<Type> template class, P-33
volMesh tools, U-97
vorticity utility, U-93
vtk
keyword entry, U-174
vtkFoam
library, U-163
vtkPV3Foam
library, U-163
W
wall
boundary condition, P-63, P-69, U-59,
U-135
wall
keyword entry, U-134
wallBuoyantPressure
Open∇FOAM-2.1.0
Index P-97
boundary condition, U-137
wallFunctionTable utility, U-90
wallGradU utility, U-93
wallHeatFlux utility, U-93
Wallis
library, U-99
wallShearStress utility, U-93
wclean script/alias, U-75
wdot utility, U-94
wedge
boundary condition, U-130, U-135, U-144
wedge
keyword entry, U-134
window
Color Legend, U-29
Options, U-168
Pipeline Browser, U-25, U-164
Render View, U-168
Seed, U-169
View Settings (Render View), U-167
window panel
Animations, U-168
Annotation, U-26, U-167
Charts, U-168
Color Legend, U-166
Color Scale, U-166
Colors, U-168
Display, U-25, U-27, U-164, U-165
General, U-167, U-168
Information, U-164
Lights, U-167
Mesh Parts, U-25
Properties, U-27, U-164
Render View, U-168
Style, U-25, U-166
windSimpleFoam solver, U-86
Wireframe
menu entry, U-166
WM ARCH
environment variable, U-76
WM ARCH OPTION
environment variable, U-76
WM COMPILE OPTION
environment variable, U-76
WM COMPILER
environment variable, U-76
WM COMPILER BIN
environment variable, U-76
WM COMPILER DIR
environment variable, U-76
WM COMPILER LIB
environment variable, U-76
WM DIR
environment variable, U-76
WM MPLIB
environment variable, U-76
WM OPTIONS
environment variable, U-76
WM PRECISION OPTION
environment variable, U-76
WM PROJECT
environment variable, U-76
WM PROJECT DIR
environment variable, U-76
WM PROJECT INST DIR
environment variable, U-76
WM PROJECT USER DIR
environment variable, U-76
WM PROJECT VERSION
environment variable, U-76
wmake
platforms, U-72
wmake script/alias, U-71
word class, P-25, P-31
writeCellCentres utility, U-94
writeCompression keyword, U-112
writeControl
keyword entry, U-111
writeControl keyword, U-24, U-62, U-111
writeFormat keyword, U-56, U-112
writeInterval keyword, U-24, U-33, U-111
writeMeshObj utility, U-91
writeNow
keyword entry, U-111
writePrecision keyword, U-112
X
x
keyword entry, U-175
XiFoam solver, U-88
xmgr
keyword entry, U-112, U-174
xyz
keyword entry, U-175
Y
y
keyword entry, U-175
yPlusLES utility, U-93
yPlusRAS utility, U-93
Z
z
keyword entry, U-175
zeroGradient
boundary condition, U-136
zipUpMesh utility, U-92
Open∇FOAM-2.1.0
